<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Playtopia Store</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      background: #fff;
      min-height: 100vh;
      min-width: 100vw;
    }
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      min-width: 100vw;
    }
    .header {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 32px 48px 0 48px;
      box-sizing: border-box;
      min-height: 100px;
    }
    .logo {
      font-size: 2.5rem;
      font-weight: 900;
      color: #181818;
      letter-spacing: 2px;
      font-family: 'Segoe UI', 'Arial', sans-serif;
      text-decoration: none;
      user-select: none;
    }
    .catalog-btn {
      display: flex;
      align-items: center;
      background: #47D651;
      border-radius: 12px;
      padding: 0 32px 0 20px;
      height: 56px;
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(71,214,81,0.08);
      margin-left: 32px;
      transition: background 0.2s;
    }
    .catalog-btn:hover {
      background: #36b94c;
    }
    .burger {
      display: flex;
      flex-direction: column;
      justify-content: center;
      margin-right: 16px;
    }
    .burger-line {
      width: 28px;
      height: 4px;
      background: #fff;
      border-radius: 2px;
      margin: 2px 0;
    }
    .search-bar {
      flex: 1;
      max-width: 420px;
      margin: 0 48px;
      display: flex;
      align-items: center;
      background: #f5f5f5;
      border-radius: 12px;
      padding: 0 16px;
      height: 48px;
    }
    .search-bar input {
      border: none;
      background: transparent;
      font-size: 1.1rem;
      flex: 1;
      outline: none;
      padding: 0 8px;
    }
    .search-bar svg {
      width: 24px;
      height: 24px;
      fill: #888;
    }
    .header-right {
      display: flex;
      align-items: center;
      gap: 40px;
    }
    .header-link {
      font-size: 1.2rem;
      color: #181818;
      text-decoration: none;
      font-weight: 500;
      margin-left: 8px;
      transition: color 0.2s;
    }
    .header-link:hover {
      color: #47D651;
    }
    .nav {
      width: 100%;
      display: flex;
      justify-content: center;
      margin-top: 32px;
      margin-bottom: 32px;
    }
    .nav-list {
      display: flex;
      gap: 80px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.03);
      padding: 16px 48px;
      align-items: center;
    }
    .nav-list li {
      list-style: none;
    }
    .nav-list a {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #181818;
      font-size: 1.15rem;
      font-weight: 500;
      text-decoration: none;
      transition: color 0.2s;
    }
    .nav-list a:hover {
      color: #47D651;
    }
    .nav-list svg {
      display: block;
      width: 32px;
      height: 32px;
    }
    .main-content {
      flex: 1;
      width: 100vw;
      max-width: 100vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
      padding: 0 48px 48px 48px;
    }
    .banners {
      display: flex;
      gap: 32px;
      width: 100%;
      max-width: 1920px;
      justify-content: center;
      margin-bottom: 48px;
      flex-wrap: wrap;
    }
    .banner {
      background: #181f2a;
      border-radius: 24px;
      padding: 32px 32px 32px 32px;
      min-width: 320px;
      min-height: 180px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: 0 2px 12px rgba(0,0,0,0.06);
      position: relative;
      flex: 1 1 350px;
      max-width: 375px;
      cursor: pointer;
    }
    .banner.steam {
      background: linear-gradient(120deg, #0f2027 0%, #2c5364 100%);
      color: #fff;
    }
    .banner.ps {
      background: linear-gradient(120deg, #1e2a78 0%, #3a4ed0 100%);
      color: #fff;
    }
    .banner.xbox {
      background: linear-gradient(120deg, #107c10 0%, #185c1e 100%);
      color: #fff;
      display: flex;
      flex-direction: row;
      align-items: center;
      min-width: 320px;
      max-width: 375px;
      padding: 0 32px;
    }
    .banner .banner-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 8px;
      text-decoration: none !important;
    }
    .banner .banner-desc {
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 24px;
      text-decoration: none !important;
    }
    .banner .banner-btn {
      background: #fff;
      color: #181818;
      border-radius: 12px;
      padding: 12px 32px;
      font-size: 1.1rem;
      font-weight: 700;
      border: none;
      cursor: pointer;
      margin-top: auto;
      max-width: 100px;
      transition: background 0.2s, color 0.2s;
      text-decoration: none;
      display: inline-block;
      width: auto;
    }
    .banner .banner-btn:hover {
      background: #47D651;
      color: #fff;
    }
    .sections {
      width: 100%;
      max-width: 1920px;
      margin-top: 32px;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }
    .section {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.03);
      padding: 24px 32px;
      min-height: 120px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      margin-bottom: 0;
    }
    .section-title-with-btn {
      display: flex;
      align-items: center;
      gap: 16px;
      margin-bottom: 12px;
      /* Убираем лишний отступ, выравниваем по baseline */
      line-height: 1.2;
    }
    .section-title {
      display: flex;
      align-items: center;
      font-size: 1.5rem;
      font-weight: 700;
      color: #181818;
      /* baseline alignment */
      line-height: 1.2;
    }
    .section-viewall-btn {
      background: #e6e6e6;
      color: #181818;
      font-weight: 700;
      font-size: 1.08rem;
      border: none;
      border-radius: 10px;
      padding: 6px 18px;
      box-shadow: 0 2px 8px rgba(71,214,81,0.08);
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      outline: none;
      height: 32px;
      display: flex;
      align-items: center;
    }
    .section-viewall-btn:hover, .section-viewall-btn:focus {
      background: #47D651;
      color: #fff;
    }
    @media (max-width: 1200px) {
      .banners {
        flex-direction: column;
        align-items: center;
      }
      .banner {
        max-width: 100%;
        min-width: 0;
      }
      .main-content, .sections {
        padding: 0 8px;
      }
    }
    @media (max-width: 900px) {
      .header, .main-content {
        padding: 16px 8px 0 8px;
      }
      .nav-list {
        gap: 24px;
        padding: 8px 8px;
      }
      .banners {
        gap: 16px;
      }
      .sections {
        gap: 16px;
      }
    }
    @media (max-width: 600px) {
      .header {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        padding: 8px 4px 0 4px;
      }
      .logo {
        font-size: 1.5rem;
      }
      .catalog-btn {
        height: 40px;
        font-size: 1rem;
        padding: 0 16px 0 10px;
      }
      .search-bar {
        max-width: 100%;
        height: 36px;
        padding: 0 8px;
      }
      .header-right {
        gap: 16px;
      }
      .nav-list {
        flex-direction: column;
        gap: 8px;
        padding: 8px 4px;
      }
      .main-content, .sections {
        padding: 0 2px;
      }
      .banners {
        flex-direction: column;
        gap: 8px;
      }
      .banner {
        padding: 16px 8px;
      }
      .section {
        padding: 12px 8px;
      }
    }
    .new-games-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 32px;
      list-style: none;
      padding: 0;
      margin: 0;
    }
    @media (max-width: 1200px) {
      .new-games-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 700px) {
      .new-games-grid { grid-template-columns: 1fr; }
    }
    .psw-product-tile {
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      width: 100%;
      min-width: 0;
      height: 340px;
      transition: box-shadow 0.2s;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    .psw-product-tile:hover {
      box-shadow: 0 4px 24px rgba(0,0,0,0.16);
    }
    .psw-game-art__container {
      width: 100%;
      aspect-ratio: 1/1;
      background: #eee;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      border-radius: 12px 12px 0 0;
    }
    .psw-media-frame.psw-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 0;
    }
    .psw-product-tile__details {
      padding: 16px 16px 12px 16px;
      display: flex;
      flex-direction: column;
      flex: 1 1 auto;
      justify-content: flex-start;
      gap: 6px;
      margin-top: 16px;
    }
    .psw-product-tile__product-type {
      font-size: 0.95em;
      color: #000000;
      font-weight: 700;
      text-transform: uppercase;
      margin-bottom: 2px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .psw-t-body {
      font-size: 1.08em;
      font-weight: 600;
      color: #181818;
      margin-bottom: 2px;
      line-height: 1.2;
      display: block;
    }
    .psw-service-upsell {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 0.95em;
      color: #000000;
      font-weight: 500;
    }
    .psw-badge {
      display: inline-block;
      background: #181818;
      color: #fff;
      border-radius: 6px;
      font-size: 0.95em;
      font-weight: 700;
      padding: 2px 8px;
      margin: 4px 0 0 0;
    }
    .psw-price {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 1.1em;
      font-weight: 700;
      color: #181818;
    }
    .psw-price .psw-m-r-3 {
      color: #000000;
      font-weight: 700;
    }
    .psw-price s {
      color: #888;
      font-size: 0.98em;
      margin-left: 4px;
    }
    a.banner,
    a.banner * {
      text-decoration: none !important;
    }
  </style>
</head>
<body>
  <header class="header">
    <span class="logo">Playtopia</span>
    <button class="catalog-btn">
      <span class="burger">
        <span class="burger-line"></span>
        <span class="burger-line"></span>
        <span class="burger-line"></span>
      </span>
      Каталог
    </button>
    <form class="search-bar" action="#">
      <input type="text" placeholder="Поиск по товарам, категориям и продавцам">
      <svg viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"></path></svg>
    </form>
    <div class="header-right">
      <a class="header-link" href="#">Профиль</a>
      <a class="header-link" href="#">Корзина</a>
    </div>
  </header>
  <nav class="nav" style="margin-top:50px;margin-bottom:32px;">
    <ul class="nav-list">
      <li>
        <a id="nav-steam" href="/steamtopup/steamtopup.html">
          <span><svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.714355" width="28" height="28" rx="10" fill="black"></rect><path d="M19.9644 5.25C17.1168 5.25 14.7972 7.52866 14.7212 10.3582L11.51 14.9485C11.272 14.9034 11.0277 14.875 10.7769 14.875C9.94707 14.875 9.17879 15.1355 8.54321 15.5757L4.21436 13.8633V18.5681L6.93164 19.6431C7.31443 21.416 8.89119 22.75 10.7769 22.75C12.705 22.75 14.3069 21.3545 14.6426 19.5217L19.6943 15.7363C19.7843 15.7409 19.8733 15.75 19.9644 15.75C22.8597 15.75 25.2144 13.3954 25.2144 10.5C25.2144 7.60462 22.8597 5.25 19.9644 5.25ZM19.9644 7C21.8946 7 23.4644 8.56975 23.4644 10.5C23.4644 12.4303 21.8946 14 19.9644 14C18.0341 14 16.4644 12.4303 16.4644 10.5C16.4644 8.56975 18.0341 7 19.9644 7ZM19.9644 7.875C19.2682 7.875 18.6005 8.15156 18.1082 8.64384C17.6159 9.13613 17.3394 9.80381 17.3394 10.5C17.3394 11.1962 17.6159 11.8639 18.1082 12.3562C18.6005 12.8484 19.2682 13.125 19.9644 13.125C20.6605 13.125 21.3282 12.8484 21.8205 12.3562C22.3128 11.8639 22.5894 11.1962 22.5894 10.5C22.5894 9.80381 22.3128 9.13613 21.8205 8.64384C21.3282 8.15156 20.6605 7.875 19.9644 7.875ZM10.7769 15.75C12.4656 15.75 13.8394 17.1238 13.8394 18.8125C13.8394 20.5012 12.4656 21.875 10.7769 21.875C9.53323 21.875 8.46523 21.1272 7.98608 20.0601L9.97192 20.8462C10.2362 20.9512 10.5074 21.0017 10.7751 21.0017C11.6466 21.0017 12.471 20.4784 12.8105 19.6191C13.2559 18.4956 12.7053 17.2233 11.5818 16.7788L9.58911 15.9893C9.95446 15.835 10.356 15.75 10.7769 15.75Z" fill="white"></path></svg></span>
          Пополнить Steam
        </a>
      </li>
      <li>
        <a id="nav-playstation" href="/playstation/playstation.html">
          <span><!-- PlayStation SVG --><svg width="32" height="32" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="600" height="600" rx="206" fill="black"></rect><g clip-path="url(#clip0_1536_15202)"><path d="M93.6311 370.209C77.5847 380.957 83.0344 401.394 117.398 411.082C153.373 423.057 191.747 425.969 229.118 419.56C230.903 419.312 232.672 418.958 234.416 418.5V382.623L197.933 394.43C184.387 398.825 169.92 399.556 156 396.55C145.252 393.371 147.372 386.861 160.239 381.412L234.416 355.677V316.015L131.325 351.438C117.907 355.812 105.207 362.137 93.6311 370.209ZM342.351 209.594V313.895C386.403 335.392 420.766 313.895 420.766 258.036C420.766 202.176 400.935 175.23 342.351 154.794C310.935 143.75 278.822 134.799 246.224 127.999V438.482L321.914 461.038V199.905C321.914 188.097 321.914 179.62 330.543 182.799C342.351 185.978 342.351 197.786 342.351 209.594ZM482.076 345.837C451.066 334.947 418.062 330.918 385.343 334.029C368.765 335.276 352.451 338.896 336.901 344.777L333.722 345.837V387.618L403.509 361.883C417.056 357.496 431.521 356.765 445.442 359.764C456.19 362.943 454.07 369.452 441.203 374.902L334.328 415.624V456.497L482.681 400.486C493.461 396.402 503.298 390.17 511.595 382.168C519.164 371.874 515.985 356.888 482.681 346.14L482.076 345.837Z" fill="white"></path></g><defs><clipPath id="clip0_1536_15202"><rect width="430" height="430" fill="white" transform="translate(85 85)"></rect></clipPath></defs></svg></span>
          PlayStation
        </a>
      </li>
      <li>
        <a href="/catalog/xgp-activation-ultimate">
          <span><!-- Xbox SVG --><svg width="32" height="32" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="600" height="600" rx="206" fill="black"></rect><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="#666666"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint0_radial_1064_14531)"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint1_radial_1064_14531)"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint2_radial_1064_14531)"></path><path d="M249.259 212.393C227.172 239.469 134.665 349.512 142.869 423.917C148.583 431.231 154.878 438.09 161.529 444.541C160.557 387.583 226.639 326.633 278.21 280.623L249.247 212.393H249.259Z" fill="black"></path><path d="M249.245 212.394C227.172 239.468 134.663 349.507 142.869 423.915C148.578 431.235 154.873 438.088 161.526 444.533C160.559 387.587 226.634 326.621 278.21 280.62L249.245 212.394Z" fill="url(#paint3_linear_1064_14531)"></path><path d="M194.969 129.897C183.487 136.923 172.735 145.089 162.875 154.271C194.599 160.368 226.419 188.619 243.869 212.021C259.062 236.048 267.316 258.07 278.042 280.8C285.505 274.349 293.054 268 300.688 261.754L300.64 163.032C277.003 148.175 237.933 128.625 195.34 129.897C195.244 129.957 195.053 129.837 194.969 129.897Z" fill="black"></path><path d="M194.969 129.897C183.487 136.923 172.735 145.089 162.875 154.271C194.599 160.368 226.419 188.619 243.869 212.021C259.062 236.048 267.316 258.07 278.042 280.8C285.505 274.349 293.054 268 300.688 261.754L300.64 163.032C277.003 148.175 237.933 128.625 195.34 129.897C195.244 129.957 195.053 129.837 194.969 129.897Z" fill="url(#paint4_linear_1064_14531)"></path><path d="M350.824 212.477C372.827 239.577 465.027 349.716 456.846 424.169C451.156 431.483 444.884 438.354 438.257 444.817C439.217 387.812 373.361 326.801 321.956 280.755L350.824 212.477Z" fill="black"></path><path d="M350.82 212.467C372.82 239.565 465.023 349.709 456.845 424.168C451.121 431.471 444.908 438.37 438.249 444.816C439.214 387.81 373.356 326.804 321.951 280.752L350.82 212.467Z" fill="url(#paint5_linear_1064_14531)"></path><path d="M404.921 129.9C416.364 136.939 427.084 145.111 436.921 154.296C405.302 160.397 373.575 188.672 356.194 212.094C341.052 236.141 332.813 258.182 322.123 280.944C314.885 274.71 307.528 268.368 299.551 261.882L299.599 163.064C323.159 148.194 362.099 128.627 404.552 129.9C404.635 129.96 404.837 129.84 404.921 129.9Z" fill="black"></path><path d="M404.921 129.9C416.364 136.939 427.084 145.111 436.921 154.296C405.302 160.397 373.575 188.672 356.194 212.094C341.052 236.141 332.813 258.182 322.123 280.944C314.885 274.71 307.528 268.368 299.551 261.882L299.599 163.064C323.159 148.194 362.099 128.627 404.552 129.9C404.635 129.96 404.837 129.84 404.921 129.9Z" fill="url(#paint6_linear_1064_14531)"></path><defs><radialGradient id="paint0_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><radialGradient id="paint1_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><radialGradient id="paint2_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><linearGradient id="paint3_linear_1064_14531" x1="227.665" y1="356.072" x2="180.165" y2="300.252" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint4_linear_1064_14531" x1="225.643" y1="222.284" x2="269.115" y2="125.618" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint5_linear_1064_14531" x1="373.036" y1="355.465" x2="325.403" y2="299.939" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint6_linear_1064_14531" x1="374.643" y1="217.339" x2="412.001" y2="156.877" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient></defs></svg></span>
          Game Pass
        </a>
      </li>
      <li>
        <a id="nav-allgames" href="/allgames/allgames.html">
          <span><!-- Game SVG --><svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.285645" width="28" height="28" rx="10" fill="#1B1D22"></rect><path d="M8.22314 20.6666C7.38981 20.6666 6.67801 20.368 6.08773 19.7708C5.49745 19.1735 5.18842 18.4513 5.16064 17.6041C5.16064 17.4791 5.16759 17.3541 5.18148 17.2291C5.19537 17.1041 5.2162 16.9791 5.24398 16.8541L6.99398 9.85409C7.18842 9.10409 7.58426 8.49645 8.18148 8.03117C8.7787 7.56589 9.45926 7.33325 10.2231 7.33325H18.3481C19.112 7.33325 19.7926 7.56589 20.3898 8.03117C20.987 8.49645 21.3829 9.10409 21.5773 9.85409L23.3273 16.8541C23.3551 16.9791 23.3794 17.1076 23.4002 17.2395C23.4211 17.3714 23.4315 17.4999 23.4315 17.6249C23.4315 18.4721 23.1294 19.1909 22.5252 19.7812C21.9211 20.3714 21.1954 20.6666 20.3481 20.6666C19.7648 20.6666 19.2231 20.5138 18.7231 20.2083C18.2231 19.9027 17.8481 19.486 17.5981 18.9583L17.0148 17.7499C16.9454 17.611 16.8412 17.5069 16.7023 17.4374C16.5634 17.368 16.4176 17.3333 16.2648 17.3333H12.3065C12.1537 17.3333 12.0079 17.368 11.869 17.4374C11.7301 17.5069 11.6259 17.611 11.5565 17.7499L10.9731 18.9583C10.7231 19.486 10.3481 19.9027 9.84814 20.2083C9.34814 20.5138 8.80648 20.6666 8.22314 20.6666ZM15.5356 13.1666C15.7718 13.1666 15.9697 13.0867 16.1294 12.927C16.2891 12.7673 16.369 12.5694 16.369 12.3333C16.369 12.0971 16.2891 11.8992 16.1294 11.7395C15.9697 11.5798 15.7718 11.4999 15.5356 11.4999C15.2995 11.4999 15.1016 11.5798 14.9419 11.7395C14.7822 11.8992 14.7023 12.0971 14.7023 12.3333C14.7023 12.5694 14.7822 12.7673 14.9419 12.927C15.1016 13.0867 15.2995 13.1666 15.5356 13.1666ZM17.2023 11.4999C17.4384 11.4999 17.6363 11.4201 17.7961 11.2603C17.9558 11.1006 18.0356 10.9027 18.0356 10.6666C18.0356 10.4305 17.9558 10.2326 17.7961 10.0728C17.6363 9.91311 17.4384 9.83325 17.2023 9.83325C16.9662 9.83325 16.7683 9.91311 16.6086 10.0728C16.4488 10.2326 16.369 10.4305 16.369 10.6666C16.369 10.9027 16.4488 11.1006 16.6086 11.2603C16.7683 11.4201 16.9662 11.4999 17.2023 11.4999ZM17.2023 14.8333C17.4384 14.8333 17.6363 14.7534 17.7961 14.5937C17.9558 14.4339 18.0356 14.236 18.0356 13.9999C18.0356 13.7638 17.9558 13.5659 17.7961 13.4062C17.6363 13.2464 17.4384 13.1666 17.2023 13.1666C16.9662 13.1666 16.7683 13.2464 16.6086 13.4062C16.4488 13.5659 16.369 13.7638 16.369 13.9999C16.369 14.236 16.4488 14.4339 16.6086 14.5937C16.7683 14.7534 16.9662 14.8333 17.2023 14.8333ZM18.869 13.1666C19.1051 13.1666 19.303 13.0867 19.4627 12.927C19.6225 12.7673 19.7023 12.5694 19.7023 12.3333C19.7023 12.0971 19.6225 11.8992 19.4627 11.7395C19.303 11.5798 19.1051 11.4999 18.869 11.4999C18.6329 11.4999 18.435 11.5798 18.2752 11.7395C18.1155 11.8992 18.0356 12.0971 18.0356 12.3333C18.0356 12.5694 18.1155 12.7673 18.2752 12.927C18.435 13.0867 18.6329 13.1666 18.869 13.1666ZM11.369 14.4166C11.5495 14.4166 11.6988 14.3576 11.8169 14.2395C11.935 14.1214 11.994 13.9721 11.994 13.7916V12.9583H12.8273C13.0079 12.9583 13.1572 12.8992 13.2752 12.7812C13.3933 12.6631 13.4523 12.5138 13.4523 12.3333C13.4523 12.1527 13.3933 12.0034 13.2752 11.8853C13.1572 11.7673 13.0079 11.7083 12.8273 11.7083H11.994V10.8749C11.994 10.6944 11.935 10.5451 11.8169 10.427C11.6988 10.3089 11.5495 10.2499 11.369 10.2499C11.1884 10.2499 11.0391 10.3089 10.9211 10.427C10.803 10.5451 10.744 10.6944 10.744 10.8749V11.7083H9.91064C9.73009 11.7083 9.58078 11.7673 9.46273 11.8853C9.34467 12.0034 9.28564 12.1527 9.28564 12.3333C9.28564 12.5138 9.34467 12.6631 9.46273 12.7812C9.58078 12.8992 9.73009 12.9583 9.91064 12.9583H10.744V13.7916C10.744 13.9721 10.803 14.1214 10.9211 14.2395C11.0391 14.3576 11.1884 14.4166 11.369 14.4166Z" fill="white"></path></svg></span>
          Игры
        </a>
      </li>
      <li>
        <a href="/catalog/all-services">
          <span><!-- Subs SVG --><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="28" height="28" rx="10" fill="#1B1D22"></rect><path d="M7.72933 16.25C7.59044 15.8889 7.48988 15.5242 7.42766 15.1558C7.36488 14.7881 7.3335 14.4167 7.3335 14.0417C7.3335 12.1806 7.97933 10.5972 9.271 9.29167C10.5627 7.98611 12.1391 7.33333 14.0002 7.33333H14.146L13.396 6.58333C13.2432 6.43056 13.1668 6.23611 13.1668 6C13.1668 5.76389 13.2432 5.56944 13.396 5.41667C13.5488 5.26389 13.7432 5.1875 13.9793 5.1875C14.2154 5.1875 14.4099 5.26389 14.5627 5.41667L16.7293 7.58333C16.8127 7.66667 16.8718 7.75694 16.9068 7.85417C16.9413 7.95139 16.9585 8.05556 16.9585 8.16667C16.9585 8.27778 16.9413 8.38194 16.9068 8.47917C16.8718 8.57639 16.8127 8.66667 16.7293 8.75L14.5627 10.9167C14.4099 11.0694 14.2154 11.1458 13.9793 11.1458C13.7432 11.1458 13.5488 11.0694 13.396 10.9167C13.2432 10.7639 13.1668 10.5694 13.1668 10.3333C13.1668 10.0972 13.2432 9.90278 13.396 9.75L14.146 9H14.0002C12.6113 9 11.4307 9.48944 10.4585 10.4683C9.48627 11.4478 9.00016 12.6389 9.00016 14.0417C9.00016 14.3194 9.02461 14.5903 9.0735 14.8542C9.12183 15.1181 9.19461 15.3819 9.29183 15.6458C9.34738 15.7847 9.36127 15.9339 9.3335 16.0933C9.30572 16.2533 9.23627 16.3889 9.12516 16.5C8.87516 16.75 8.60794 16.8508 8.3235 16.8025C8.0385 16.7536 7.84044 16.5694 7.72933 16.25ZM13.4377 22.5833L11.271 20.4167C11.1877 20.3333 11.1288 20.2431 11.0943 20.1458C11.0593 20.0486 11.0418 19.9444 11.0418 19.8333C11.0418 19.7222 11.0593 19.6181 11.0943 19.5208C11.1288 19.4236 11.1877 19.3333 11.271 19.25L13.4377 17.0833C13.5904 16.9306 13.7849 16.8542 14.021 16.8542C14.2571 16.8542 14.4516 16.9306 14.6043 17.0833C14.7571 17.2361 14.8335 17.4306 14.8335 17.6667C14.8335 17.9028 14.7571 18.0972 14.6043 18.25L13.8543 19H14.0002C15.3891 19 16.5696 18.5106 17.5418 17.5317C18.5141 16.5522 19.0002 15.3611 19.0002 13.9583C19.0002 13.6806 18.976 13.4097 18.9277 13.1458C18.8788 12.8819 18.8057 12.6181 18.7085 12.3542C18.6529 12.2153 18.6391 12.0658 18.6668 11.9058C18.6946 11.7464 18.7641 11.6111 18.8752 11.5C19.1252 11.25 19.3924 11.1492 19.6768 11.1975C19.9618 11.2464 20.1599 11.4306 20.271 11.75C20.4099 12.1111 20.5107 12.4756 20.5735 12.8433C20.6357 13.2117 20.6668 13.5833 20.6668 13.9583C20.6668 15.8194 20.021 17.4028 18.7293 18.7083C17.4377 20.0139 15.8613 20.6667 14.0002 20.6667H13.8543L14.6043 21.4167C14.7571 21.5694 14.8335 21.7639 14.8335 22C14.8335 22.2361 14.7571 22.4306 14.6043 22.5833C14.4516 22.7361 14.2571 22.8125 14.021 22.8125C13.7849 22.8125 13.5904 22.7361 13.4377 22.5833Z" fill="white"></path></svg></span>
          Подписки
        </a>
      </li>
    </ul>
  </nav>
  <main class="main-content">
    <div class="banners">
      <a href="/steamtopup/steamtopup.html" class="banner steam">
        <div class="banner-title">Steam</div>
        <div class="banner-desc">Моментально и безопасно</div>
        <span class="banner-btn">Пополнить</span>
      </a>
      <a href="#" class="banner ps">
        <div class="banner-title">PlayStation</div>
        <div class="banner-desc">Комиссия 0%</div>
        <span class="banner-btn">Пополнить</span>
      </a>
      <div class="banner xbox">
        <div style="display:flex;align-items:center;gap:24px;">
          <svg width="64" height="64" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="600" height="600" rx="206" fill="black"></rect><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="#666664"></path></svg>
          <div>
            <div class="banner-title" style="color:#fff;">Подписки<br>Xbox Game Pass</div>
          </div>
        </div>
      </div>
    </div>
    <div class="sections">
      <div class="section">
        <div class="section-title-with-btn"><span class="section-title">Скидки</span><button class="section-viewall-btn">Посмотреть все</button></div>
        <div class="psw-l-w-1/1">
          <ul id="discount-games-list" class="psw-grid-list psw-l-grid"></ul>
        </div>
      </div>
      <div class="section">
        <div class="section-title-with-btn"><span class="section-title">Новинки</span><button class="section-viewall-btn">Посмотреть все</button></div>
        <div class="psw-l-w-1/1">
          <ul id="new-games-list" class="psw-grid-list psw-l-grid"></ul>
        </div>
      </div>
      <div class="section">
        <div class="section-title-with-btn"><span class="section-title">Предзаказы</span><button class="section-viewall-btn">Посмотреть все</button></div>
        <div class="psw-l-w-1/1">
          <ul id="preorder-games-list" class="psw-grid-list psw-l-grid"></ul>
        </div>
      </div>
    </div>
  </main>
<style>
.psw-grid-list.psw-l-grid {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 32px;
  list-style: none;
  padding: 0;
  margin: 0;
  width: 100%;
}
.psw-grid-list.psw-l-grid > li {
  /* НЕ квадрат! */
  min-height: 340px;
  display: flex;
  flex-direction: column;
  border-radius: 16px;
  background: #fff;
  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.06);
  padding: 0;
  margin: 0;
}
@media (max-width: 1600px) {
  .psw-grid-list.psw-l-grid { grid-template-columns: repeat(4, 1fr); }
}
@media (max-width: 1200px) {
  .psw-grid-list.psw-l-grid { grid-template-columns: repeat(3, 1fr); }
}
@media (max-width: 900px) {
  .psw-grid-list.psw-l-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 600px) {
  .psw-grid-list.psw-l-grid { grid-template-columns: 1fr; }
}
.psw-product-tile {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: #fff;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: none;
  padding: 0;
}
.psw-game-art__container {
  width: 100%;
  aspect-ratio: 1/1;
  position: relative;
  border-top-left-radius: 16px;
  border-top-right-radius: 16px;
  overflow: hidden;
  background: #f5f5f7;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
}
.psw-game-art__container img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 16px 16px 0 0;
  display: block;
}
.psw-product-tile__details {
  flex: 1 1 auto;
  background: #fff;
  border-bottom-left-radius: 16px;
  border-bottom-right-radius: 16px;
  padding: 16px 12px 12px 12px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin-top: 0;
}
.psw-t-body.psw-c-t-1 {
  font-size: 1.08rem;
  color: #000;
  margin-bottom: 4px;
  line-height: 1.2;
  min-height: 2.4em;
  display: block;
  font-weight: 700;
}
.psw-service-upsell {
  color: #000;
  font-size: 1.08rem;
  font-weight: 700;
  margin-bottom: 2px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.psw-service-upsell .psw-icon-psplus {
  width: 18px;
  height: 18px;
  display: inline-block;
  vertical-align: middle;
  margin-right: 4px;
}
.psw-badge {
  background: #000;
  color: #fff;
  border-radius: 6px;
  font-size: 1.08rem;
  font-weight: 700;
  padding: 2px 8px;
  display: inline-block;
  margin-bottom: 2px;
  width: fit-content;
}
.psw-price {
  font-size: 1.08rem;
  font-weight: 700;
  color: #000 !important;
  display: flex;
  align-items: baseline;
  gap: 8px;
}
.psw-price span, .psw-price .psw-m-r-3 {
  color: #000 !important;
  font-weight: 700 !important;
}
.psw-price s {
  color: #888;
  font-size: 0.98rem;
  margin-left: 4px;
  font-weight: 400;
}
.psw-m-r-3 { margin-right: 8px; }
.psw-product-tile__product-type {
  font-size: 0.95em;
  color: #000000;
  font-weight: 700;
  text-transform: uppercase;
}
.psw-product-tile__platforms {
  display: flex;
  gap: 4px;
  font-size: 0.95em;
  color: #000000;
  font-weight: 500;
}
</style>
<script>
function daysBetween(dateStr) {
  // dateStr: '25/6/2025' → Date
  const [d, m, y] = dateStr.split(/[./-]/).map(Number);
  if (!d || !m || !y) return Infinity;
  const date = new Date(y, m - 1, d);
  const now = new Date();
  return Math.floor((now - date) / (1000 * 60 * 60 * 24));
}
function subscriptionIcon(type) {
  if (type === "eaplay") return '<img src="static/eaplay.png" class="psw-icon-psplus" alt="EA Play">';
  if (type === "psplus") return '<img src="static/psplus.png" class="psw-icon-psplus" alt="PS Plus">';
  return '';
}
function renderCard(game) {
  let details = `<span class='psw-t-body psw-c-t-1 psw-t-truncate-2'>${game.title}</span>`;
  if (game.subscription_icon || game.subscription) {
    details += `<div class='psw-service-upsell'>${game.subscription_icon ? subscriptionIcon(game.subscription_icon) : ''}${game.subscription ? game.subscription : ''}</div>`;
  }
  if (game.discount_percent) {
    details += `<span class='psw-badge'>${game.discount_percent}</span>`;
  }
  details += `<div class='psw-price'>${game.price ? game.price : ''}${game.old_price ? `<s>${game.old_price}</s>` : ''}</div>`;
  return `
    <li>
      <div class='psw-product-tile'>
        <div class='psw-game-art__container'>
          <img src='${game.img}' alt='${game.title}'>
        </div>
        <div class='psw-product-tile__details'>
          ${details}
        </div>
      </div>
    </li>
  `;
}
let subscriptions = [];
fetch('/parser/subscriptions.json')
  .then(res => res.json())
  .then(subs => { subscriptions = subs; });
function renderSubscriptionSearchCard(sub, plan) {
  let img = sub.image;
  if (sub.service.toLowerCase().includes('ea play')) img = 'eaplaysub.png';
  let tier = sub.tier ? sub.tier : '';
  let tierClass = '';
  if (tier.toLowerCase() === 'deluxe') tierClass = 'DELUXE';
  else if (tier.toLowerCase() === 'extra') tierClass = 'EXTRA';
  else if (tier.toLowerCase() === 'essential') tierClass = 'ESSENTIAL';
  return {
    title: sub.service,
    period: plan.period,
    price: plan.price,
    region: sub.region,
    img: '/static/' + img,
    tier: tier,
    tierClass: tierClass
  };
}
function groupGamesByTitle(games) {
  // Возвращает { title: { in: game, tr: game } }
  const map = {};
  for (const g of games) {
    if (!map[g.title]) map[g.title] = {};
    map[g.title][g.region] = g;
  }
  return map;
}
function renderCombinedCard(gameIn, gameTr) {
  // Индия сверху, Турция снизу
  const img = gameIn?.img || gameTr?.img || '';
  const title = gameIn?.title || gameTr?.title || '';
  // Скидка — если отличается, показываем обе, иначе одну
  let discount = '';
  if (gameIn?.discount_percent && gameTr?.discount_percent && gameIn.discount_percent !== gameTr.discount_percent) {
    discount = `<span class='psw-badge'>IN: ${gameIn.discount_percent}</span> <span class='psw-badge'>TR: ${gameTr.discount_percent}</span>`;
  } else if (gameIn?.discount_percent) {
    discount = `<span class='psw-badge'>${gameIn.discount_percent}</span>`;
  } else if (gameTr?.discount_percent) {
    discount = `<span class='psw-badge'>${gameTr.discount_percent}</span>`;
  }
  // Подписка и иконка — если отличается, показываем обе, иначе одну
  function subscriptionIcon(type) {
    if (type === "eaplay") return '<img src="static/eaplay.png" class="psw-icon-psplus" alt="EA Play">';
    if (type === "psplus") return '<img src="static/psplus.png" class="psw-icon-psplus" alt="PS Plus">';
    return '';
  }
  let subscription = '';
  if (
    (gameIn?.subscription && gameTr?.subscription && gameIn.subscription !== gameTr.subscription) ||
    (gameIn?.subscription_icon && gameTr?.subscription_icon && gameIn.subscription_icon !== gameTr.subscription_icon)
  ) {
    subscription = `<div class='psw-service-upsell'>${subscriptionIcon(gameIn?.subscription_icon)}${gameIn?.subscription || ''} <span style='color:#888;font-weight:700;font-size:0.98em;'>(IN)</span></div>` +
                  `<div class='psw-service-upsell'>${subscriptionIcon(gameTr?.subscription_icon)}${gameTr?.subscription || ''} <span style='color:#888;font-weight:700;font-size:0.98em;'>(TR)</span></div>`;
  } else if (gameIn?.subscription || gameIn?.subscription_icon) {
    subscription = `<div class='psw-service-upsell'>${subscriptionIcon(gameIn?.subscription_icon)}${gameIn?.subscription || ''}</div>`;
  } else if (gameTr?.subscription || gameTr?.subscription_icon) {
    subscription = `<div class='psw-service-upsell'>${subscriptionIcon(gameTr?.subscription_icon)}${gameTr?.subscription || ''}</div>`;
  }
  // Цены
  let prices = '';
  if (gameIn) {
    prices += `<div class='psw-price'>🇮🇳 ${gameIn.price || ''}${gameIn.old_price ? ` <s>${gameIn.old_price}</s>` : ''}</div>`;
  }
  if (gameTr) {
    prices += `<div class='psw-price'>🇹🇷 ${gameTr.price || ''}${gameTr.old_price ? ` <s>${gameTr.old_price}</s>` : ''}</div>`;
  }
  return `
    <li>
      <div class='psw-product-tile'>
        <div class='psw-game-art__container'>
          <img src='${img}' alt='${title}'>
        </div>
        <div class='psw-product-tile__details'>
          <span class='psw-t-body psw-c-t-1 psw-t-truncate-2'>${title}</span>
          ${subscription}
          ${discount}
          ${prices}
        </div>
      </div>
    </li>
  `;
}
fetch('/parser/games.json')
  .then(res => res.json())
  .then(games => {
    const grouped = groupGamesByTitle(games);
    // Новинки: только если дата не в будущем и не старше 21 дня
    const newGames = Object.values(grouped).filter(g => {
      const game = g.in || g.tr;
      if (!game.release_date) return false;
      const [d, m, y] = game.release_date.split(/[./-]/).map(Number);
      if (!d || !m || !y) return false;
      const date = new Date(y, m - 1, d);
      const now = new Date();
      const days = Math.floor((now - date) / (1000 * 60 * 60 * 24));
      return days >= 0 && days <= 21;
    }).sort((a, b) => {
      const tA = (a.in || a.tr).title;
      const tB = (b.in || b.tr).title;
      return tA.localeCompare(tB);
    });
    // Скидки: old_price не пустой и не только пробелы хотя бы в одном регионе
    const discountGames = Object.values(grouped).filter(g => {
      return (g.in && g.in.old_price && g.in.old_price.replace(/\s/g, '').length > 0) ||
             (g.tr && g.tr.old_price && g.tr.old_price.replace(/\s/g, '').length > 0);
    }).sort((a, b) => {
      const tA = (a.in || a.tr).title;
      const tB = (b.in || b.tr).title;
      return tA.localeCompare(tB);
    });
    // Предзаказы: дата выхода в будущем
    const preorderGames = Object.values(grouped).filter(g => {
      const game = g.in || g.tr;
      if (!game.release_date) return false;
      const [d, m, y] = game.release_date.split(/[./-]/).map(Number);
      if (!d || !m || !y) return false;
      const date = new Date(y, m - 1, d);
      const now = new Date();
      return date > now;
    }).sort((a, b) => {
      const tA = (a.in || a.tr).title;
      const tB = (b.in || b.tr).title;
      return tA.localeCompare(tB);
    });
    // Рендерим секции
    const newGamesList = document.getElementById('new-games-list');
    if (newGamesList) {
      if (newGames.length > 0) {
        newGamesList.innerHTML = newGames.map(g => renderCombinedCard(g.in, g.tr)).join('');
      } else {
        newGamesList.innerHTML = '<div style="padding:32px 0;color:#888;font-size:1.2rem;">Нет игр</div>';
      }
    }
    const discountGamesList = document.getElementById('discount-games-list');
    if (discountGamesList) {
      if (discountGames.length > 0) {
        discountGamesList.innerHTML = discountGames.map(g => renderCombinedCard(g.in, g.tr)).join('');
      } else {
        discountGamesList.innerHTML = '<div style=\"padding:32px 0;color:#888;font-size:1.2rem;\">Нет игр</div>';
      }
    }
    const preorderGamesList = document.getElementById('preorder-games-list');
    if (preorderGamesList) {
      if (preorderGames.length > 0) {
        preorderGamesList.innerHTML = preorderGames.map(g => renderCombinedCard(g.in, g.tr)).join('');
      } else {
        preorderGamesList.innerHTML = '<div style=\"padding:32px 0;color:#888;font-size:1.2rem;\">Нет предзаказов</div>';
      }
    }

    // --- Поисковик ---
    const searchBar = document.querySelector('.search-bar');
    const searchInput = document.querySelector('.search-bar input');
    let searchDropdown = document.getElementById('search-dropdown');
    if (!searchDropdown) {
      searchDropdown = document.createElement('div');
      searchDropdown.id = 'search-dropdown';
      searchDropdown.style.position = 'absolute';
      searchDropdown.style.background = '#fff';
      searchDropdown.style.boxShadow = '0 2px 12px rgba(0,0,0,0.12)';
      searchDropdown.style.borderRadius = '12px';
      searchDropdown.style.zIndex = '1000';
      searchDropdown.style.maxHeight = '420px';
      searchDropdown.style.overflowY = 'auto';
      searchDropdown.style.display = 'none';
      searchDropdown.style.left = '0';
      searchDropdown.style.top = '48px';
      // Ограничиваем ширину input'ом
      searchDropdown.style.width = searchInput.offsetWidth + 'px';
      document.querySelector('.search-bar').style.position = 'relative';
      document.querySelector('.search-bar').appendChild(searchDropdown);
    }
    // Категории и услуги
    const staticServices = [
      {
        type: 'category',
        title: 'Пополнить Steam',
        img: 'static/steam.png',
        link: '/steamtopup/steamtopup.html',
        children: [
          { title: 'Steam Wallet Code 5$', img: 'static/SWC5.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Steam Wallet Code 10$', img: 'static/SWC10.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Steam Wallet Code 20$', img: 'static/SWC20.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Steam Wallet Code 25$', img: 'static/SWC25.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Steam Wallet Code 50$', img: 'static/SWC50.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Steam Wallet Code 100$', img: 'static/SWC100.png', link: '/steamtopup/steamtopup.html' },
          { title: 'Услуга "Пополнить Steam"', img: 'static/steam.png', link: '/steamtopup/steamtopup.html' },
        ]
      },
      // Можно добавить PlayStation, Xbox и т.д.
    ];
    function renderSearchResults(results) {
      if (!results.games.length && !results.services.length && !results.subs.length) {
        searchDropdown.innerHTML = '<div style="padding:16px;color:#888;">Ничего не найдено</div>';
        searchDropdown.style.display = 'block';
        return;
      }
      let html = '';
      if (results.games.length) {
        html += '<div style="padding:12px 16px 4px 16px;font-weight:700;font-size:1.1rem;">Игры</div>';
        html += results.games.map(item => `
          <div class="search-result-game" tabindex="0" style="display:flex;align-items:center;gap:12px;padding:8px 16px;cursor:pointer;transition:background 0.15s;border-radius:8px;" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
            <img src="${item.img}" style="width:54px;height:54px;object-fit:cover;border-radius:8px;">
            <div style="display:flex;flex-direction:column;">
              <span style="font-size:1.05rem;font-weight:700;">${item.title}</span>
              <span style="font-size:0.98rem;color:#888;">
                ${item.price ? item.price : ''}
                ${item.region ? '· ' + item.region.toUpperCase() : ''}
                ${item.discount_percent ? '· <span class=\'psw-badge\' style=\'background:#181818;color:#fff;padding:2px 8px;border-radius:6px;font-size:0.98em;font-weight:700;display:inline-block;\'>' + item.discount_percent + '</span>' : ''}
                ${item.old_price ? ' <s style="color:#888;">' + item.old_price + '</s>' : ''}
                ${item.subscription_icon ? '<img src="static/' + item.subscription_icon + '.png" style="height:18px;vertical-align:middle;margin-left:4px;">' : ''}
                ${item.subscription ? '· ' + item.subscription : ''}
              </span>
            </div>
          </div>
        `).join('');
      }
      if (results.services.length) {
        html += results.services.map(item => {
          if (item.type === 'category') {
            return `<div style="padding:12px 16px 4px 16px;font-weight:700;font-size:1.1rem;">${item.title}</div>` +
              (item.children ? item.children.map(child => `
                <a href="${child.link}" style="display:flex;align-items:center;gap:12px;padding:8px 16px;text-decoration:none;color:#181818;transition:background 0.15s;border-radius:8px;" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
                  <img src="${child.img}" style="width:54px;height:54px;object-fit:cover;border-radius:8px;">
                  <span style="font-size:1.05rem;">${child.title}</span>
                </a>`).join('') : '');
          }
          return '';
        }).join('');
      }
      if (results.subs && results.subs.length) {
  html += '<div style="padding:12px 16px 4px 16px;font-weight:700;font-size:1.1rem;">Подписки</div>';
  html += results.subs.map(item => {
    let badgeStyle = '';
    if (item.tierClass === 'DELUXE') badgeStyle = 'background:#181818;color:#fff;';
    else if (item.tierClass === 'EXTRA') badgeStyle = 'background:#7c4dff;color:#fff;';
    else if (item.tierClass === 'ESSENTIAL') badgeStyle = 'background:#fff;color:#181818;border:1.5px solid #181818;';
    return `
      <div class="search-result-sub" tabindex="0" style="display:flex;align-items:center;gap:12px;padding:8px 16px;cursor:pointer;transition:background 0.15s;border-radius:8px;" onmouseover="this.style.background='#f5f5f5'" onmouseout="this.style.background='transparent'">
        <img src="${item.img}" style="width:54px;height:54px;object-fit:cover;border-radius:8px;">
        <div style="display:flex;flex-direction:column;">
          <span style="font-size:1.05rem;font-weight:700;">${item.title}${item.tier ? ` <span class='psw-badge sub-card-tier ${item.tierClass}' style='${badgeStyle}'>${item.tier}</span>` : ''}</span>
          <span style="font-size:0.98rem;color:#888;">${item.period} · ${item.price} · ${item.region}</span>
        </div>
      </div>
    `;
  }).join('');
}
      searchDropdown.innerHTML = html;
      searchDropdown.style.display = 'block';
      // Навешиваем обработчик на игры (закрывать дропдаун)
      searchDropdown.querySelectorAll('.search-result-game').forEach(el => {
        el.addEventListener('mousedown', function(e) {
          searchDropdown.style.display = 'none';
        });
      });
      searchDropdown.querySelectorAll('.search-result-sub').forEach(el => {
        el.addEventListener('mousedown', function(e) {
          searchDropdown.style.display = 'none';
        });
      });
    }
    searchInput.addEventListener('input', function() {
      const q = this.value.trim().toLowerCase();
      if (!q) {
        searchDropdown.style.display = 'none';
        return;
      }
      // Игры по алфавиту
      const foundGames = games.filter(g => g.title && g.title.toLowerCase().includes(q))
        .sort((a, b) => a.title.localeCompare(b.title));
      // Категории/услуги по алфавиту
      let foundServices = [];
      staticServices.forEach(cat => {
        if (cat.title.toLowerCase().includes(q)) {
          foundServices.push(cat);
        } else if (cat.children) {
          const found = cat.children.filter(child => child.title.toLowerCase().includes(q));
          if (found.length) {
            foundServices.push({ ...cat, children: found });
          }
        }
      });
      foundServices = foundServices.sort((a, b) => a.title.localeCompare(b.title));
      // Подписки
      let foundSubs = [];
      subscriptions.forEach(sub => {
        sub.plans.forEach(plan => {
          if (
            sub.service.toLowerCase().includes(q) ||
            (sub.tier && sub.tier.toLowerCase().includes(q)) ||
            plan.period.toLowerCase().includes(q) ||
            plan.price.toLowerCase().includes(q)
          ) {
            foundSubs.push(renderSubscriptionSearchCard(sub, plan));
          }
        });
      });
      renderSearchResults({ games: foundGames, services: foundServices, subs: foundSubs });
      // Синхронизирую ширину dropdown с .search-bar
      searchDropdown.style.width = searchBar.offsetWidth + 'px';
    });
    searchInput.addEventListener('focus', function() {
      if (searchDropdown.innerHTML && searchDropdown.innerHTML.trim() !== '') {
        searchDropdown.style.display = 'block';
      }
      // Синхронизирую ширину dropdown с .search-bar
      searchDropdown.style.width = searchBar.offsetWidth + 'px';
    });
    document.addEventListener('click', function(e) {
      if (!searchDropdown.contains(e.target) && e.target !== searchInput) {
        searchDropdown.style.display = 'none';
      }
    });
  });
// Исправляю переход на steamtopup.html
// Для баннера:
document.addEventListener('DOMContentLoaded', function() {
  const steamBanner = document.getElementById('steam-banner');
  if (steamBanner) {
    steamBanner.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = 'steamtopup.html';
    });
  }
  // Для навигации:
  const navSteam = document.getElementById('nav-steam');
  if (navSteam) {
    navSteam.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = 'steamtopup.html';
    });
  }
});
// Исправляю переходы на абсолютные пути
// Навигация "Игры"
document.addEventListener('DOMContentLoaded', function() {
  const navAllGames = document.getElementById('nav-allgames');
  if (navAllGames) {
    navAllGames.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = '/allgames/allgames.html';
    });
  }
  // Навигация "Пополнить Steam"
  const navSteam = document.getElementById('nav-steam');
  if (navSteam) {
    navSteam.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = '/steamtopup/steamtopup.html';
    });
  }
  // Навигация "PlayStation"
  const navPlaystation = document.getElementById('nav-playstation');
  if (navPlaystation) {
    navPlaystation.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = '/playstation/playstation.html';
    });
  }
  // Баннер Steam
  const steamBanner = document.getElementById('steam-banner');
  if (steamBanner) {
    steamBanner.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = '/steamtopup/steamtopup.html';
    });
  }
});
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.section-viewall-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      let filter = '';
      const title = btn.closest('.section-title-with-btn')?.querySelector('.section-title')?.textContent?.trim();
      if (title === 'Скидки') filter = 'discount';
      if (title === 'Новинки') filter = 'new';
      if (title === 'Предзаказы') filter = 'preorder';
      window.location.href = '/allgames/allgames.html' + (filter ? ('?filter=' + filter) : '');
    });
  });
});
// JS: делаем баннер PlayStation кликабельным
document.addEventListener('DOMContentLoaded', function() {
  const psBanner = document.querySelector('.banner.ps');
  if (psBanner) {
    psBanner.style.cursor = 'pointer';
    psBanner.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = '/playstation/playstation.html';
    });
  }
});
</script>
</body>
</html> 