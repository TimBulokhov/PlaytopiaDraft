<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пополнение баланса Steam - Playtopia</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Arial', sans-serif;
            background: #fff;
            min-height: 100vh;
            min-width: 100vw;
        }
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            min-width: 100vw;
        }
        .header {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 32px 48px 0 48px;
            box-sizing: border-box;
            min-height: 100px;
        }
        .logo {
            font-size: 2.5rem;
            font-weight: 900;
            color: #181818;
            letter-spacing: 2px;
            font-family: 'Segoe UI', 'Arial', sans-serif;
            text-decoration: none;
            user-select: none;
        }
            .catalog-btn {
      display: flex;
      align-items: center;
      background: #3d79ff;
      border-radius: 12px;
      padding: 0 32px 0 20px;
      height: 56px;
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(11,218,81,0.08);
      margin-left: 32px;
      transition: background 0.2s;
    }
    .catalog-btn:hover {
      background: #3d79ff;
    }
        .burger {
            display: flex;
            flex-direction: column;
            justify-content: center;
            margin-right: 16px;
        }
        .burger-line {
            width: 28px;
            height: 4px;
            background: #fff;
            border-radius: 2px;
            margin: 2px 0;
        }
        .search-bar {
            flex: 1;
            max-width: 420px;
            margin: 0 48px;
            display: flex;
            align-items: center;
            background: #f5f5f5;
            border-radius: 12px;
            padding: 0 16px;
            height: 48px;
            visibility: hidden;
            pointer-events: none;
        }
        .search-bar input {
            border: none;
            background: transparent;
            font-size: 1.1rem;
            flex: 1;
            outline: none;
            padding: 0 8px;
        }
        .search-bar svg {
            width: 24px;
            height: 24px;
            fill: #888;
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: 40px;
        }
        .header-link {
            font-size: 1.2rem;
            color: #181818;
            text-decoration: none;
            font-weight: 500;
            margin-left: 8px;
            transition: color 0.2s;
        }
        .header-link:hover {
            color: #3d79ff;
        }
        .nav {
          width: 100%;
          display: flex;
          justify-content: center;
          margin-top: 32px;
          margin-bottom: 32px;
        }
        .nav-list {
          display: flex;
          gap: 80px;
          background: #fff;
          border-radius: 16px;
          box-shadow: 0 2px 12px rgba(0,0,0,0.03);
          padding: 16px 48px;
          align-items: center;
        }
        .nav-list li {
          list-style: none;
        }
        .nav-list a {
          display: flex;
          align-items: center;
          gap: 12px;
          color: #181818;
          font-size: 1.15rem;
          font-weight: 500;
          text-decoration: none;
          transition: color 0.2s;
        }
        .nav-list a:hover {
          color: #3d79ff;
        }
        .nav-list svg {
          display: block;
          width: 32px;
          height: 32px;
        }
        @media (max-width: 900px) {
          .nav-list {
            gap: 24px;
            padding: 8px 8px;
          }
        }
        @media (max-width: 600px) {
          .nav-list {
            flex-direction: column;
            gap: 8px;
            padding: 8px 4px;
          }
        }
        @media (max-width: 900px) {
            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 12px;
                padding: 8px 4px 0 4px;
            }
            .logo {
                font-size: 1.5rem;
            }
            .catalog-btn {
                height: 40px;
                font-size: 1rem;
                padding: 0 16px 0 10px;
            }
            .header-right {
                gap: 16px;
            }
        }
        .main-layout-grid {
            display: flex;
            flex-direction: column;
            width: 100%;
        }
        .container-and-info {
            height: 100%;
        }
        .main-layout {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        min-height: 100vh;
        background: #fff;
        font-size: 16px;
    }

    .container-and-info {
        display: flex;
        flex-direction: row;
        align-items: flex-start;
        justify-content: flex-start;
        width: 100%;
        max-width: 1600px;
        margin: 0 auto;
        box-sizing: border-box;
        padding: 0 0 0 0;
        min-height: 650px;
    }
    .container {
        max-width: 480px;
        margin: 40px 0 0 0;
        padding: 0 20px;
        flex: 0 0 480px;
    }

        .form-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 6px 28px rgba(21,96,189,0.13);
            padding: 32px;
            border: 2px solid #1560BD !important;
        }

        .header-text h1 {
            font-size: 24px;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 4px;
        }

        .header-text p {
            font-size: 14px;
            color: #666;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label, .info-title {
            font-size: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #444;
            margin-bottom: 8px;
        }

        .input-wrapper {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            background: white;
            transition: all 0.2s ease;
            outline: none;
        }

        .form-input:focus {
            border-color: #1560BD;
            box-shadow: 0 0 0 3px rgba(21,96,189,0.1);
        }

        .help-button {
            position: absolute;
            right: 12px;
            background: none;
            border: none;
            color: #999;
            cursor: pointer;
            padding: 4px;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .help-button:hover {
            background: #f5f5f5;
            color: #666;
        }

        .amount-section {
            display: flex;
            gap: 16px;
            align-items: flex-end;
        }

        .amount-input {
            flex: 1;
        }

        .currency-chips {
            display: flex;
            gap: 8px;
            margin-top: 8px;
        }

        .currency-chip {
            padding: 6px 12px;
            border: 1px solid #e0e0e0;
            border-radius: 16px;
            background: white;
            cursor: pointer;
            font-size: 15px;
            font-weight: bold;
            color: #444;
            transition: all 0.2s ease;
        }

        .currency-chip.active {
            background: #1560BD;
            color: white;
            border-color: #1560BD;
            font-weight: 600;
        }

        .commission-info,
        .form-group .commission-info + div,
        .form-group > div[style*='Минимальная сумма'],
        .form-group > div[style*='Выберите валюту пополнения'] {
            font-size: 15px !important;
            color: #444 !important;
            font-weight: 400 !important;
        }

        .pay-button {
            width: 100%;
            padding: 16px 0;
            background: #1560BD;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 24px;
        }

        .pay-button:hover {
            background: #0B3C6E;
            transform: translateY(-1px);
        }

        .pay-button:disabled {
            background: #ccc !important;
            color: #fff !important;
            cursor: pointer;
            opacity: 1 !important;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 16px;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #1560BD;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .error-message {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 8px;
            display: none;
        }

        .success-message {
            color: #2e7d32;
            font-size: 14px;
            margin-top: 8px;
            display: none;
        }

        #conversion-result {
            font-size: 18px;
            font-weight: 600;
            color: #222;
        }

        .form-group .amount-section {
            margin-bottom: 24px;
        }

        .pay-btn {
            width: 100%;
            background: #1560BD;
            color: #fff;
            font-size: 20px;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            padding: 14px 0;
            margin-top: 18px;
            cursor: pointer;
            transition: background 0.2s, opacity 0.2s;
            box-shadow: 0 2px 8px rgba(21,96,189,0.08);
        }

        .pay-btn:disabled {
            background: #ffe0b3;
            color: #b3b3b3;
            cursor: not-allowed;
            opacity: 0.7;
        }

        button.pay-button:disabled,
        .pay-button[disabled] {
            background: #ccc !important;
            color: #fff !important;
            cursor: pointer !important;
            opacity: 1 !important;
            box-shadow: none !important;
        }

        .login-faq-modal-btn {
            display:inline-block;
            background:#1560BD;
            color:#fff;
            font-weight:600;
            padding:12px 24px;
            border-radius:8px;
            text-decoration:none;
            font-size:16px;
            transition:background 0.2s;
            border:none;
            cursor:pointer;
        }

        .login-faq-modal-btn:hover {
            background:#0B3C6E;
        }

        .info-cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 75px;
            max-width: 850px;
            margin-bottom: 75px;
            margin-left: 175px;
        }
        .info-card {
          background: #f6faff;
          border-radius: 16px;
          box-shadow: 0 2px 12px rgba(0,0,0,0.03);
          padding: 20px 18px 18px 18px;
          font-size: 18px;
          min-height: 120px;
          border: 1.5px solid #e3eaf6;
        }
        .info-card-title {
          font-size: 16px;
          margin-bottom: 8px;
        }
        .info-icon {
            width: 54px;
            height: 54px;
            margin-bottom: 10px;
            font-size: 54px !important;
        }

        .info-title {
            font-size: 28px;
            font-weight: 700;
            color: #222;
            margin-bottom: 6px;
        }

        .info-text {
            font-size: 16px;
            color: #333;
            line-height: 1.5;
        }

        .info-text a {
            color: #1560BD;
            text-decoration: underline;
        }

        .input-faq-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: #1560BD;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 0;
            outline: none;
            box-shadow: none;
            transition: none;
        }

        .input-faq-btn:hover, .input-faq-btn:focus {
            background: #1560BD;
            outline: none;
            box-shadow: none;
        }

        .input-faq-btn svg {
            width: 16px;
            height: 16px;
        }

        .input-faq-btn-new {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            padding: 0;
            margin: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .input-faq-btn-new svg {
            display: block;
        }

        .input-faq-btn-new:focus {
            outline: 2px solid #1560BD;
        }

        .input-faq-btn-clean {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none !important;
            border: none !important;
            padding: 0;
            margin: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .input-faq-btn-clean svg {
            display: block;
        }

        .input-faq-btn-clean:focus {
            outline: 2px solid #1560BD;
        }

        .input-faq-btn-clean, .input-faq-btn-clean:focus, .input-faq-btn-clean:hover {
            background: none !important;
            border: none !important;
            outline: none !important;
            box-shadow: none !important;
        }

        .swc-section {
        width: 100%;
        margin: 0px 0 0 0;
        padding: 0;
        position: relative;
        z-index: 1;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        max-width: 1600px;
        box-sizing: border-box;
        margin-left: auto;
        margin-right: auto;
    }
        .swc-title {
            font-size: 24px;
            font-weight: 700;
            color: #222;
            margin-bottom: 10px;
            text-align: left;
            padding-left: 0;
        }
        .swc-cards {
            display: flex;
            flex-wrap: nowrap;
            gap: 18px;
            justify-content: space-between;
            align-items: stretch;
            width: 100%;
            min-width: 0;
        }
        .swc-card {
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 2px 12px rgba(21,96,189,0.10);
            border: 2px solid transparent;
            transition: box-shadow 0.2s, border-color 0.2s, transform 0.2s;
            cursor: pointer;
            padding: 8px 8px 0 8px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            min-width: 0;
            min-height: 180px;
            flex: 1 1 0;
            max-width: 180px;
        }
        .swc-card img {
            width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            pointer-events: none;
            user-select: none;
        }
        .swc-card:hover, .swc-card:focus {
            border-color: #1560BD;
            box-shadow: 0 4px 24px rgba(21,96,189,0.18);
            transform: scale(1.045);
            z-index: 2;
        }
        @media (max-width: 1200px) {
            .swc-title { font-size: 20px; }
            .swc-cards { gap: 10px; }
            .swc-card { min-height: 120px; max-width: 110px; }
        }
        @media (max-width: 900px) {
            .swc-title { font-size: 18px; }
            .swc-cards { gap: 6px; }
            .swc-card { min-height: 90px; max-width: 80px; }
        }
        @media (max-width: 700px) {
            .swc-cards {
                display: flex;
                flex-wrap: wrap;
                gap: 8px;
                justify-content: space-between;
                width: 100%;
                box-sizing: border-box;
            }
            .swc-card {
                flex: 1 1 45vw;
                min-width: 120px;
                max-width: 48vw;
                margin-bottom: 10px;
                min-height: 0;
                padding: 4px 4px 0 4px;
                box-sizing: border-box;
                outline: none;
            }
            .swc-card:active,
            .swc-card:focus {
                border-color: #1560BD !important;
                box-shadow: 0 4px 24px rgba(21,96,189,0.18) !important;
                transform: scale(1.045) !important;
                z-index: 2;
            }
        }
        #amountError {
            min-height: 24px;
            display: none;
            text-align: center;
            font-size: 15px;
            font-weight: 400;
            margin-top: 10px;
            color: #ff4444;
            transition: color 0.2s;
            visibility: hidden;
            min-height: 24px;
            position: relative;
            z-index: 2;
        }
        #amountError[style*='display:none'] {
            color: #ff4444;
            visibility: hidden !important;
        }
        .form-spacer { display: none; }
        #conversion-note-block {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 15px;
            color: #444;
        }
        #conversion-faq {
            cursor: pointer;
            display: inline-flex;
            align-items: center;
        }

        @media (max-width: 700px) {
            html {
                font-size: 16px;
            }
            .main-layout-grid {
                grid-template-rows: auto auto;
                display: block !important;
                width: 100%;
            }
            .container-and-info,
            .swc-section {
                width: 100% !important;
                max-width: 100vw !important;
                margin: 0 !important;
                padding: 0 4px !important;
                box-sizing: border-box;
                display: block !important;
                margin-top: 18px !important;
            }
            .info-cards {
                grid-template-columns: 1fr !important;
                gap: 18px !important;
                margin: 24px 0 0 0 !important;
                max-width: 100% !important;
                width: 100% !important;
            }
            .info-card {
                min-height: unset !important;
                padding: 28px 12px 18px 12px !important;
                width: 100% !important;
                box-sizing: border-box;
            }
        }
        .info-cards {
          margin-bottom: 80px;
        }
    </style>
</head>
<body>
  <header class="header">
    <span class="logo" style="cursor:pointer;">PLAYTOPIA</span>
    <button class="catalog-btn">
      <span class="burger">
        <span class="burger-line"></span>
        <span class="burger-line"></span>
        <span class="burger-line"></span>
      </span>
      Каталог
    </button>
    <div class="search-bar"></div>
    <div class="header-right">
      <a class="header-link" href="#">Профиль</a>
      <a class="header-link" href="#">Корзина</a>
    </div>
  </header>
  <nav class="nav" style="margin-top:50px;margin-bottom:32px;">
    <ul class="nav-list">
      <li>
        <a id="nav-steam" href="/steamtopup/steamtopup.html">
          <span><svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.714355" width="28" height="28" rx="10" fill="black"></rect><path d="M19.9644 5.25C17.1168 5.25 14.7972 7.52866 14.7212 10.3582L11.51 14.9485C11.272 14.9034 11.0277 14.875 10.7769 14.875C9.94707 14.875 9.17879 15.1355 8.54321 15.5757L4.21436 13.8633V18.5681L6.93164 19.6431C7.31443 21.416 8.89119 22.75 10.7769 22.75C12.705 22.75 14.3069 21.3545 14.6426 19.5217L19.6943 15.7363C19.7843 15.7409 19.8733 15.75 19.9644 15.75C22.8597 15.75 25.2144 13.3954 25.2144 10.5C25.2144 7.60462 22.8597 5.25 19.9644 5.25ZM19.9644 7C21.8946 7 23.4644 8.56975 23.4644 10.5C23.4644 12.4303 21.8946 14 19.9644 14C18.0341 14 16.4644 12.4303 16.4644 10.5C16.4644 8.56975 18.0341 7 19.9644 7ZM19.9644 7.875C19.2682 7.875 18.6005 8.15156 18.1082 8.64384C17.6159 9.13613 17.3394 9.80381 17.3394 10.5C17.3394 11.1962 17.6159 11.8639 18.1082 12.3562C18.6005 12.8484 19.2682 13.125 19.9644 13.125C20.6605 13.125 21.3282 12.8484 21.8205 12.3562C22.3128 11.8639 22.5894 11.1962 22.5894 10.5C22.5894 9.80381 22.3128 9.13613 21.8205 8.64384C21.3282 8.15156 20.6605 7.875 19.9644 7.875ZM10.7769 15.75C12.4656 15.75 13.8394 17.1238 13.8394 18.8125C13.8394 20.5012 12.4656 21.875 10.7769 21.875C9.53323 21.875 8.46523 21.1272 7.98608 20.0601L9.97192 20.8462C10.2362 20.9512 10.5074 21.0017 10.7751 21.0017C11.6466 21.0017 12.471 20.4784 12.8105 19.6191C13.2559 18.4956 12.7053 17.2233 11.5818 16.7788L9.58911 15.9893C9.95446 15.835 10.356 15.75 10.7769 15.75Z" fill="white"></path></svg></span>
          Пополнить Steam
        </a>
      </li>
      <li>
        <a id="nav-playstation" href="/playstation/playstation.html">
          <span><!-- PlayStation SVG --><svg width="32" height="32" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="600" height="600" rx="206" fill="black"></rect><g clip-path="url(#clip0_1536_15202)"><path d="M93.6311 370.209C77.5847 380.957 83.0344 401.394 117.398 411.082C153.373 423.057 191.747 425.969 229.118 419.56C230.903 419.312 232.672 418.958 234.416 418.5V382.623L197.933 394.43C184.387 398.825 169.92 399.556 156 396.55C145.252 393.371 147.372 386.861 160.239 381.412L234.416 355.677V316.015L131.325 351.438C117.907 355.812 105.207 362.137 93.6311 370.209ZM342.351 209.594V313.895C386.403 335.392 420.766 313.895 420.766 258.036C420.766 202.176 400.935 175.23 342.351 154.794C310.935 143.75 278.822 134.799 246.224 127.999V438.482L321.914 461.038V199.905C321.914 188.097 321.914 179.62 330.543 182.799C342.351 185.978 342.351 197.786 342.351 209.594ZM482.076 345.837C451.066 334.947 418.062 330.918 385.343 334.029C368.765 335.276 352.451 338.896 336.901 344.777L333.722 345.837V387.618L403.509 361.883C417.056 357.496 431.521 356.765 445.442 359.764C456.19 362.943 454.07 369.452 441.203 374.902L334.328 415.624V456.497L482.681 400.486C493.461 396.402 503.298 390.17 511.595 382.168C519.164 371.874 515.985 356.888 482.681 346.14L482.076 345.837Z" fill="white"></path></g><defs><clipPath id="clip0_1536_15202"><rect width="430" height="430" fill="white" transform="translate(85 85)"></rect></clipPath></defs></svg></span>
          PlayStation
        </a>
      </li>
      <li>
        <a href="/xbox/xbox.html">
            <span><!-- Xbox SVG --><svg width="32" height="32" viewBox="0 0 600 600" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="600" height="600" rx="206" fill="black"></rect><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="#666666"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint0_radial_1064_14531)"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint1_radial_1064_14531)"></path><path d="M500 300C500 410.462 410.456 500 300 500C189.544 500 100 410.462 100 300C100 189.55 189.544 100 300 100C410.456 100 500 189.538 500 300Z" fill="url(#paint2_radial_1064_14531)"></path><path d="M249.259 212.393C227.172 239.469 134.665 349.512 142.869 423.917C148.583 431.231 154.878 438.09 161.529 444.541C160.557 387.583 226.639 326.633 278.21 280.623L249.247 212.393H249.259Z" fill="black"></path><path d="M249.245 212.394C227.172 239.468 134.663 349.507 142.869 423.915C148.578 431.235 154.873 438.088 161.526 444.533C160.559 387.587 226.634 326.621 278.21 280.62L249.245 212.394Z" fill="url(#paint3_linear_1064_14531)"></path><path d="M194.969 129.897C183.487 136.923 172.735 145.089 162.875 154.271C194.599 160.368 226.419 188.619 243.869 212.021C259.062 236.048 267.316 258.07 278.042 280.8C285.505 274.349 293.054 268 300.688 261.754L300.64 163.032C277.003 148.175 237.933 128.625 195.34 129.897C195.244 129.957 195.053 129.837 194.969 129.897Z" fill="black"></path><path d="M194.969 129.897C183.487 136.923 172.735 145.089 162.875 154.271C194.599 160.368 226.419 188.619 243.869 212.021C259.062 236.048 267.316 258.07 278.042 280.8C285.505 274.349 293.054 268 300.688 261.754L300.64 163.032C277.003 148.175 237.933 128.625 195.34 129.897C195.244 129.957 195.053 129.837 194.969 129.897Z" fill="url(#paint4_linear_1064_14531)"></path><path d="M350.824 212.477C372.827 239.577 465.027 349.716 456.846 424.169C451.156 431.483 444.884 438.354 438.257 444.817C439.217 387.812 373.361 326.801 321.956 280.755L350.824 212.477Z" fill="black"></path><path d="M350.82 212.467C372.82 239.565 465.023 349.709 456.845 424.168C451.121 431.471 444.908 438.37 438.249 444.816C439.214 387.81 373.356 326.804 321.951 280.752L350.82 212.467Z" fill="url(#paint5_linear_1064_14531)"></path><path d="M404.921 129.9C416.364 136.939 427.084 145.111 436.921 154.296C405.302 160.397 373.575 188.672 356.194 212.094C341.052 236.141 332.813 258.182 322.123 280.944C314.885 274.71 307.528 268.368 299.551 261.882L299.599 163.064C323.159 148.194 362.099 128.627 404.552 129.9C404.635 129.96 404.837 129.84 404.921 129.9Z" fill="black"></path><path d="M404.921 129.9C416.364 136.939 427.084 145.111 436.921 154.296C405.302 160.397 373.575 188.672 356.194 212.094C341.052 236.141 332.813 258.182 322.123 280.944C314.885 274.71 307.528 268.368 299.551 261.882L299.599 163.064C323.159 148.194 362.099 128.627 404.552 129.9C404.635 129.96 404.837 129.84 404.921 129.9Z" fill="url(#paint6_linear_1064_14531)"></path><defs><radialGradient id="paint0_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><radialGradient id="paint1_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><radialGradient id="paint2_radial_1064_14531" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(296.416 278.564) rotate(90) scale(291.425 255.851)"><stop stop-color="white"></stop><stop offset="1" stop-color="white"></stop></radialGradient><linearGradient id="paint3_linear_1064_14531" x1="227.665" y1="356.072" x2="180.165" y2="300.252" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint4_linear_1064_14531" x1="225.643" y1="222.284" x2="269.115" y2="125.618" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint5_linear_1064_14531" x1="373.036" y1="355.465" x2="325.403" y2="299.939" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient><linearGradient id="paint6_linear_1064_14531" x1="374.643" y1="217.339" x2="412.001" y2="156.877" gradientUnits="userSpaceOnUse"><stop></stop><stop offset="1" stop-opacity="0"></stop></linearGradient></defs></svg></span>
            Xbox
          </a>
      </li>
      <li>
        <a id="nav-allgames" href="/allgames/allgames.html">
          <span><!-- Game SVG --><svg width="29" height="28" viewBox="0 0 29 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="0.285645" width="28" height="28" rx="10" fill="#1B1D22"></rect><path d="M8.22314 20.6666C7.38981 20.6666 6.67801 20.368 6.08773 19.7708C5.49745 19.1735 5.18842 18.4513 5.16064 17.6041C5.16064 17.4791 5.16759 17.3541 5.18148 17.2291C5.19537 17.1041 5.2162 16.9791 5.24398 16.8541L6.99398 9.85409C7.18842 9.10409 7.58426 8.49645 8.18148 8.03117C8.7787 7.56589 9.45926 7.33325 10.2231 7.33325H18.3481C19.112 7.33325 19.7926 7.56589 20.3898 8.03117C20.987 8.49645 21.3829 9.10409 21.5773 9.85409L23.3273 16.8541C23.3551 16.9791 23.3794 17.1076 23.4002 17.2395C23.4211 17.3714 23.4315 17.4999 23.4315 17.6249C23.4315 18.4721 23.1294 19.1909 22.5252 19.7812C21.9211 20.3714 21.1954 20.6666 20.3481 20.6666C19.7648 20.6666 19.2231 20.5138 18.7231 20.2083C18.2231 19.9027 17.8481 19.486 17.5981 18.9583L17.0148 17.7499C16.9454 17.611 16.8412 17.5069 16.7023 17.4374C16.5634 17.368 16.4176 17.3333 16.2648 17.3333H12.3065C12.1537 17.3333 12.0079 17.368 11.869 17.4374C11.7301 17.5069 11.6259 17.611 11.5565 17.7499L10.9731 18.9583C10.7231 19.486 10.3481 19.9027 9.84814 20.2083C9.34814 20.5138 8.80648 20.6666 8.22314 20.6666ZM15.5356 13.1666C15.7718 13.1666 15.9697 13.0867 16.1294 12.927C16.2891 12.7673 16.369 12.5694 16.369 12.3333C16.369 12.0971 16.2891 11.8992 16.1294 11.7395C15.9697 11.5798 15.7718 11.4999 15.5356 11.4999C15.2995 11.4999 15.1016 11.5798 14.9419 11.7395C14.7822 11.8992 14.7023 12.0971 14.7023 12.3333C14.7023 12.5694 14.7822 12.7673 14.9419 12.927C15.1016 13.0867 15.2995 13.1666 15.5356 13.1666ZM17.2023 11.4999C17.4384 11.4999 17.6363 11.4201 17.7961 11.2603C17.9558 11.1006 18.0356 10.9027 18.0356 10.6666C18.0356 10.4305 17.9558 10.2326 17.7961 10.0728C17.6363 9.91311 17.4384 9.83325 17.2023 9.83325C16.9662 9.83325 16.7683 9.91311 16.6086 10.0728C16.4488 10.2326 16.369 10.4305 16.369 10.6666C16.369 10.9027 16.4488 11.1006 16.6086 11.2603C16.7683 11.4201 16.9662 11.4999 17.2023 11.4999ZM17.2023 14.8333C17.4384 14.8333 17.6363 14.7534 17.7961 14.5937C17.9558 14.4339 18.0356 14.236 18.0356 13.9999C18.0356 13.7638 17.9558 13.5659 17.7961 13.4062C17.6363 13.2464 17.4384 13.1666 17.2023 13.1666C16.9662 13.1666 16.7683 13.2464 16.6086 13.4062C16.4488 13.5659 16.369 13.7638 16.369 13.9999C16.369 14.236 16.4488 14.4339 16.6086 14.5937C16.7683 14.7534 16.9662 14.8333 17.2023 14.8333ZM18.869 13.1666C19.1051 13.1666 19.303 13.0867 19.4627 12.927C19.6225 12.7673 19.7023 12.5694 19.7023 12.3333C19.7023 12.0971 19.6225 11.8992 19.4627 11.7395C19.303 11.5798 19.1051 11.4999 18.869 11.4999C18.6329 11.4999 18.435 11.5798 18.2752 11.7395C18.1155 11.8992 18.0356 12.0971 18.0356 12.3333C18.0356 12.5694 18.1155 12.7673 18.2752 12.927C18.435 13.0867 18.6329 13.1666 18.869 13.1666ZM11.369 14.4166C11.5495 14.4166 11.6988 14.3576 11.8169 14.2395C11.935 14.1214 11.994 13.9721 11.994 13.7916V12.9583H12.8273C13.0079 12.9583 13.1572 12.8992 13.2752 12.7812C13.3933 12.6631 13.4523 12.5138 13.4523 12.3333C13.4523 12.1527 13.3933 12.0034 13.2752 11.8853C13.1572 11.7673 13.0079 11.7083 12.8273 11.7083H11.994V10.8749C11.994 10.6944 11.935 10.5451 11.8169 10.427C11.6988 10.3089 11.5495 10.2499 11.369 10.2499C11.1884 10.2499 11.0391 10.3089 10.9211 10.427C10.803 10.5451 10.744 10.6944 10.744 10.8749V11.7083H9.91064C9.73009 11.7083 9.58078 11.7673 9.46273 11.8853C9.34467 12.0034 9.28564 12.1527 9.28564 12.3333C9.28564 12.5138 9.34467 12.6631 9.46273 12.7812C9.58078 12.8992 9.73009 12.9583 9.91064 12.9583H10.744V13.7916C10.744 13.9721 10.803 14.1214 10.9211 14.2395C11.0391 14.3576 11.1884 14.4166 11.369 14.4166Z" fill="white"></path></svg></span>
          Игры
        </a>
      </li>
      <li>
        <a href="/catalog/all-services">
          <span><!-- Subs SVG --><svg width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="28" height="28" rx="10" fill="#1B1D22"></rect><path d="M7.72933 16.25C7.59044 15.8889 7.48988 15.5242 7.42766 15.1558C7.36488 14.7881 7.3335 14.4167 7.3335 14.0417C7.3335 12.1806 7.97933 10.5972 9.271 9.29167C10.5627 7.98611 12.1391 7.33333 14.0002 7.33333H14.146L13.396 6.58333C13.2432 6.43056 13.1668 6.23611 13.1668 6C13.1668 5.76389 13.2432 5.56944 13.396 5.41667C13.5488 5.26389 13.7432 5.1875 13.9793 5.1875C14.2154 5.1875 14.4099 5.26389 14.5627 5.41667L16.7293 7.58333C16.8127 7.66667 16.8718 7.75694 16.9068 7.85417C16.9413 7.95139 16.9585 8.05556 16.9585 8.16667C16.9585 8.27778 16.9413 8.38194 16.9068 8.47917C16.8718 8.57639 16.8127 8.66667 16.7293 8.75L14.5627 10.9167C14.4099 11.0694 14.2154 11.1458 13.9793 11.1458C13.7432 11.1458 13.5488 11.0694 13.396 10.9167C13.2432 10.7639 13.1668 10.5694 13.1668 10.3333C13.1668 10.0972 13.2432 9.90278 13.396 9.75L14.146 9H14.0002C12.6113 9 11.4307 9.48944 10.4585 10.4683C9.48627 11.4478 9.00016 12.6389 9.00016 14.0417C9.00016 14.3194 9.02461 14.5903 9.0735 14.8542C9.12183 15.1181 9.19461 15.3819 9.29183 15.6458C9.34738 15.7847 9.36127 15.9339 9.3335 16.0933C9.30572 16.2533 9.23627 16.3889 9.12516 16.5C8.87516 16.75 8.60794 16.8508 8.3235 16.8025C8.0385 16.7536 7.84044 16.5694 7.72933 16.25ZM13.4377 22.5833L11.271 20.4167C11.1877 20.3333 11.1288 20.2431 11.0943 20.1458C11.0593 20.0486 11.0418 19.9444 11.0418 19.8333C11.0418 19.7222 11.0593 19.6181 11.0943 19.5208C11.1288 19.4236 11.1877 19.3333 11.271 19.25L13.4377 17.0833C13.5904 16.9306 13.7849 16.8542 14.021 16.8542C14.2571 16.8542 14.4516 16.9306 14.6043 17.0833C14.7571 17.2361 14.8335 17.4306 14.8335 17.6667C14.8335 17.9028 14.7571 18.0972 14.6043 18.25L13.8543 19H14.0002C15.3891 19 16.5696 18.5106 17.5418 17.5317C18.5141 16.5522 19.0002 15.3611 19.0002 13.9583C19.0002 13.6806 18.976 13.4097 18.9277 13.1458C18.8788 12.8819 18.8057 12.6181 18.7085 12.3542C18.6529 12.2153 18.6391 12.0658 18.6668 11.9058C18.6946 11.7464 18.7641 11.6111 18.8752 11.5C19.1252 11.25 19.3924 11.1492 19.6768 11.1975C19.9618 11.2464 20.1599 11.4306 20.271 11.75C20.4099 12.1111 20.5107 12.4756 20.5735 12.8433C20.6357 13.2117 20.6668 13.5833 20.6668 13.9583C20.6668 15.8194 20.021 17.4028 18.7293 18.7083C17.4377 20.0139 15.8613 20.6667 14.0002 20.6667H13.8543L14.6043 21.4167C14.7571 21.5694 14.8335 21.7639 14.8335 22C14.8335 22.2361 14.7571 22.4306 14.6043 22.5833C14.4516 22.7361 14.2571 22.8125 14.021 22.8125C13.7849 22.8125 13.5904 22.7361 13.4377 22.5833Z" fill="white"></path></svg></span>
          Подписки
        </a>
      </li>
    </ul>
  </nav>
  <script>
  document.querySelector('.logo').addEventListener('click', function() {
    window.location.href = '/';
  });
  </script>
    <div class="main-layout-grid">
        <div class="container-and-info">
            <div class="container">
                <div id="rate-error" style="display:none;color:#d32f2f;font-size:14px;margin-bottom:12px;"></div>
                <div class="steam-header-block" style="display:flex;flex-direction:row;align-items:center;gap:16px;margin-bottom:24px;padding-left:0;">
                    <div class="steam-icon" style="min-width:48px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#111D2E 0%,#1560BD 100%);border-radius:12px;position:relative;"></div>
                    <div class="header-text" style="display:flex;flex-direction:column;align-items:flex-start;gap:2px;">
                        <h1 style="font-size:24px;font-weight:600;color:#1a1a1a;margin:0;line-height:1.1;">Пополнение баланса Steam</h1>
                        <p style="font-size:14px;color:#666;margin:0;">Официальный сервис Playtopia</p>
                    </div>
                </div>
                <form id="steamForm">
                    <div class="form-group">
                        <label class="form-label" for="steamLogin">Логин Steam</label>
                        <div class="input-wrapper">
                            <input 
                                type="text" 
                                id="steamLogin" 
                                class="form-input" 
                                placeholder="Введите логин Steam"
                                required
                            >
                            <button id="login-faq-btn" type="button" class="input-faq-btn-clean" aria-label="Справка по логину Steam"><svg width="22" height="22" viewBox="0 0 22 22" fill="none"><circle cx="11" cy="11" r="11" fill="#1560BD"/><text x="11" y="16" text-anchor="middle" font-size="15" fill="#fff" font-family="Inter, Arial, sans-serif" font-weight="bold">i</text></svg></button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="amount">Сумма пополнения, ₽</label>
                        <div class="amount-section">
                            <div class="amount-input">
                                <input 
                                    type="number" 
                                    id="amount" 
                                    class="form-input" 
                                    placeholder="Введите сумму в рублях"
                                    min="1"
                                    step="1"
                                    required
                                >
                            </div>
                        </div>
                        <div style="font-size:13px;color:#888;margin-top:2px;">Только целое число, без копеек</div>
                        <hr style="border: none; border-top: 1.5px solid #222; margin: 18px 0 14px 0;">
                        <div style="font-size:13px;color:#888;line-height:1.7;">
                            <div>Комиссия 7%</div>
                            <div>Минимальная сумма пополнения 25 рублей</div>
                        </div>
                        <div style="font-size:15px;color:#444;margin-top:10px;margin-bottom:8px;">Выберите валюту аккаунта</div>
                        <div class="currency-chips">
                            <div class="currency-chip active" data-currency="₽">₽</div>
                            <div class="currency-chip" data-currency="$">$</div>
                            <div class="currency-chip" data-currency="₸">₸</div>
                        </div>
                    </div>
                    <div id="conversion-block" style="margin: 24px 0 0 0; display: none;">
                        <div style="font-size: 15px; color: #666; margin-bottom: 8px;">Вы получите на баланс Steam:</div>
                        <div id="conversion-result" style="font-size:18px;font-weight:600;"></div>
                    </div>
                    <div id="conversion-note-block"><span>Сумма может отличаться из-за внутренней конвертации Steam!</span><span id="conversion-faq" style="cursor:pointer;display:inline-flex;align-items:center;">
<svg width="18" height="18" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="12" fill="#1560BD"/><text x="12" y="17" text-anchor="middle" font-size="16" fill="#fff" font-family="Arial">?</text></svg>
</span></div>
                    <div id="conversion-tooltip" style="display:none;position:absolute;z-index:1000;background:#222;color:#fff;padding:12px 16px;border-radius:8px;font-size:14px;max-width:320px;box-shadow:0 4px 16px rgba(0,0,0,0.15);"></div>

                    <button id="payButton" type="submit" class="pay-button" disabled>Оплатить <span id="totalAmount">0.00 ₽</span></button>
                    <div id="amountError" style="color:#ff4444;font-size:15px;font-weight:400;margin-top:10px;display:none;min-height:24px;text-align:center;"></div>

                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p>Обработка платежа...</p>
                    </div>

                    <div class="error-message" id="errorMessage" style="display:none;"></div>
                    <div class="success-message" id="successMessage" style="display:none;"></div>
                </form>
            </div>
            <div class="info-cards">
                <div class="info-card">
                    <div class="info-icon"> <svg viewBox="0 0 32 32" width="32" height="32" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M1.61148 20.3146C3.46586 26.4961 9.20214 31 15.9912 31C24.2806 31 31.0008 24.2841 31.0008 16C31.0008 7.71575 24.2806 1 15.9912 1C8.03653 1 1.52774 7.18399 1.01367 15.0034C1.985 16.6335 2.36389 17.6416 1.61148 20.3146Z" fill="url(#paint0_linear_6323_82119)"></path><path d="M15.2174 12.2438C15.2174 12.269 15.2174 12.2943 15.2186 12.318L11.5457 17.65C10.9507 17.6229 10.3537 17.7272 9.78758 17.9603C9.53802 18.062 9.30418 18.1869 9.08477 18.3311L1.0196 15.0131C1.01966 15.0131 0.832975 18.0813 1.61071 20.368L7.31233 22.7191C7.59861 23.9976 8.47626 25.1191 9.77109 25.6586C11.8896 26.5431 14.3322 25.535 15.2135 23.4169C15.4428 22.8633 15.5498 22.2826 15.5343 21.7032L20.7896 17.95C20.8321 17.9513 20.8759 17.9526 20.9185 17.9526C24.0634 17.9526 26.6196 15.3903 26.6196 12.2438C26.6196 9.09702 24.0634 6.53711 20.9185 6.53711C17.7748 6.53711 15.2174 9.09702 15.2174 12.2438ZM14.3361 23.0487C13.654 24.6852 11.7722 25.4616 10.1365 24.7805C9.38187 24.4663 8.81214 23.8908 8.48348 23.2045L10.3394 23.9732C11.5457 24.4753 12.9297 23.9036 13.4311 22.6985C13.9341 21.492 13.3635 20.1066 12.1578 19.6045L10.2393 18.8101C10.9796 18.5294 11.8212 18.5191 12.6075 18.8461C13.4002 19.1757 14.0153 19.7963 14.3413 20.5895C14.6672 21.3826 14.6659 22.2581 14.3361 23.0487ZM20.9185 16.047C18.8248 16.047 17.1203 14.341 17.1203 12.2438C17.1203 10.1483 18.8248 8.44179 20.9185 8.44179C23.0134 8.44179 24.7179 10.1483 24.7179 12.2438C24.7179 14.341 23.0134 16.047 20.9185 16.047ZM18.0724 12.238C18.0724 10.6604 19.3505 9.3808 20.9249 9.3808C22.5006 9.3808 23.7787 10.6604 23.7787 12.238C23.7787 13.8158 22.5006 15.0942 20.9249 15.0942C19.3505 15.0942 18.0724 13.8158 18.0724 12.238Z" fill="white"></path><defs><linearGradient id="paint0_linear_6323_82119" x1="16.0073" y1="1" x2="16.0073" y2="31" gradientUnits="userSpaceOnUse"><stop stop-color="#111D2E"></stop><stop offset="0.21248" stop-color="#051839"></stop><stop offset="0.40695" stop-color="#0A1B48"></stop><stop offset="0.5811" stop-color="#132E62"></stop><stop offset="0.7376" stop-color="#144B7E"></stop><stop offset="0.87279" stop-color="#136497"></stop><stop offset="1" stop-color="#1387B8"></stop></linearGradient></defs></svg> </div>
                    <div class="info-title">Логин Steam</div>
                    <div class="info-text">Ваш логин — это уникальный идентификатор для входа в Steam.<br>Он не меняется после регистрации.<br>Проверьте логин перед оплатой.<br><a href="https://store.steampowered.com/account/" target="_blank">Узнать свой логин Steam</a></div>
                </div>
                <div class="info-card">
                    <div class="info-icon"> <svg width="32" height="32" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="12" fill="#1560BD"/><path d="M12 7v4" stroke="#fff" stroke-width="2" stroke-linecap="round"/><circle cx="12" cy="16" r="1" fill="#fff"/></svg> </div>
                    <div class="info-title">Ограничения</div>
                    <div class="info-text">Пополнение доступно только для аккаунтов с СНГ регионами.<br>Проверьте, чтобы страна и валюта аккаунта были подходящими.<br>Для пополнения аккаунтов Турции, Аргентины и других регионов — используйте Steam Wallet Codes.</div>
                </div>
                <div class="info-card">
                    <div class="info-icon"> <svg width="32" height="32" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="12" fill="#1560BD"/><path d="M12 6v6l4 2" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> </div>
                    <div class="info-title">Оплата заказа</div>
                    <div class="info-text">Зачисление обычно происходит мгновенно.<br>Сумма может отличаться из-за конвертации.</div>
                </div>
                <div class="info-card">
                    <div class="info-icon"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#1560BD" width="32" height="32"><circle cx="12" cy="12" r="12" fill="#1560BD"/><path stroke-linecap="round" stroke-linejoin="round" d="m20.893 13.393-1.135-1.135a2.252 2.252 0 0 1-.421-.585l-1.08-2.16a.414.414 0 0 0-.663-.107.827.827 0 0 1-.812.21l-1.273-.363a.89.89 0 0 0-.738 1.595l.587.39c.59.395.674 1.23.172 1.732l-.2.2c-.212.212-.33.498-.33.796v.41c0 .409-.11.809-.32 1.158l-1.315 2.191a2.11 2.11 0 0 1-1.81 1.025 1.055 1.055 0 0 1-1.055-1.055v-1.172c0-.92-.56-1.747-1.414-2.089l-.655-.261a2.25 2.25 0 0 1-1.383-2.46l.007-.042a2.25 2.25 0 0 1 .29-.787l.09-.15a2.25 2.25 0 0 1 2.37-1.048l1.178.236a1.125 1.125 0 0 0 1.302-.795l.208-.73a1.125 1.125 0 0 0-.578-1.315l-.665-.332-.091.091a2.25 2.25 0 0 1-1.591.659h-.18c-.249 0-.487.1-.662.274a.931.931 0 0 1-1.458-1.137l1.411-2.353a2.25 2.25 0 0 0 .286-.76m11.928 9.869A9 9 0 0 0 8.965 3.525m11.928 9.868A9 9 0 1 1 8.965 3.525" fill="#fff"/></svg> </div>
                    <div class="info-title">Новый аккаунт Steam</div>
                    <div class="info-text">Если это первое пополнение —<br>регион и валюта аккаунта могут измениться.<br>Рекомендуем пополнить на минимальную сумму для проверки.</div>
                </div>
            </div>
        </div>
    </div>
    <section class="swc-section">
        <h2 class="swc-title">Steam Wallet Codes</h2>
        <div class="swc-cards">
            <div class="swc-card"><img src="/static/SWC5.png" alt="$5 Steam Wallet Code"></div>
            <div class="swc-card"><img src="/static/SWC10.png" alt="$10 Steam Wallet Code"></div>
            <div class="swc-card"><img src="/static/SWC20.png" alt="$20 Steam Wallet Code"></div>
            <div class="swc-card"><img src="/static/SWC25.png" alt="$25 Steam Wallet Code"></div>
            <div class="swc-card"><img src="/static/SWC50.png" alt="$50 Steam Wallet Code"></div>
            <div class="swc-card"><img src="/static/SWC100.png" alt="$100 Steam Wallet Code"></div>
        </div>
    </section>

    <div id="login-faq-modal" style="display:none;position:fixed;z-index:2000;left:0;top:0;width:100vw;height:100vh;background:rgba(0,0,0,0.45);align-items:center;justify-content:center;">
        <div style="background:#23232b;color:#fff;border-radius:16px;max-width:420px;width:90vw;padding:32px 24px 24px 24px;position:relative;box-shadow:0 8px 32px rgba(0,0,0,0.25);">
            <button id="login-faq-close" style="position:absolute;top:16px;right:16px;background:none;border:none;cursor:pointer;color:#fff;font-size:24px;line-height:1;">
                <svg width="28" height="28" fill="none" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M10.5859 12.0001L5.29297 6.70718L6.70718 5.29297L12.0001 10.5859L17.293 5.29297L18.7072 6.70718L13.4143 12.0001L18.7072 17.293L17.293 18.7072L12.0001 13.4143L6.70718 18.7072L5.29297 17.293L10.5859 12.0001Z" fill="#fff"/></svg>
            </button>
            <header style="margin-bottom:18px;"><p style="font-size:20px;font-weight:600;text-align:center;">Как узнать свой логин?</p></header>
            <div style="margin-bottom:18px;">
                <p style="margin-bottom:12px;">Ваш логин — это уникальный идентификатор для входа в Steam.<br>Он не меняется после регистрации.<br>Проверьте логин перед оплатой!</p>
                <img alt="steam login screenshot" src="/static/login.png" style="width:100%;height:auto;border-radius:8px;margin-bottom:12px;">
                <p style="margin-bottom:0;">Если логин введён неверно, средства поступят на другой аккаунт.</p>
            </div>
            <div style="text-align:center;margin-top:18px;">
                <a href="https://store.steampowered.com/account/" target="_blank" class="login-faq-modal-btn">Посмотреть свой логин Steam</a>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('steamForm');
        const steamLoginInput = document.getElementById('steamLogin');
        const amountInput = document.getElementById('amount');
        const totalAmountSpan = document.getElementById('totalAmount');
        const payButton = document.getElementById('payButton');
        const loading = document.getElementById('loading');
        const errorMessage = document.getElementById('errorMessage');
        const successMessage = document.getElementById('successMessage');
        const currencyChips = document.querySelectorAll('.currency-chip');

        const COMMISSION = 0.07; // 7% комиссия
        let rates = { USD: 0, RUB: 1, KZT: 0 };
        let selectedCurrency = 'RUB';

        // Получаем курсы валют с cbr-xml-daily.ru (ЦБ РФ)
        async function fetchRates() {
            try {
                const res = await fetch('https://www.cbr-xml-daily.ru/latest.js');
                const data = await res.json();
                if (!data.rates || !data.rates.USD || !data.rates.KZT) throw new Error('Нет данных о курсе');
                rates.USD = data.rates.USD;
                rates.KZT = data.rates.KZT;
                rates.RUB = 1;
                document.getElementById('rate-error').style.display = 'none';
                updateTotalAmount();
                updateConversionBlock();
            } catch (e) {
                document.getElementById('rate-error').textContent = 'Не удалось получить курс валют. Попробуйте позже.';
                document.getElementById('rate-error').style.display = 'block';
                payButton.disabled = true;
            }
        }

        // Кнопки валют — только визуальный эффект
        currencyChips.forEach(chip => {
            chip.addEventListener('click', () => {
                currencyChips.forEach(c => c.classList.remove('active'));
                chip.classList.add('active');
                selectedCurrency = chip.dataset.currency === '$' ? 'USD' : chip.dataset.currency === '₸' ? 'KZT' : 'RUB';
                updateConversionBlock();
            });
        });

        // Обновление общей суммы
        function updateTotalAmount() {
            const amountRub = parseFloat(amountInput.value.replace(',', '.')) || 0;
            const total = amountRub > 0 ? (amountRub * (1 + COMMISSION)) : 0;
            totalAmountSpan.textContent = total.toFixed(2) + ' ₽';
        }
        amountInput.addEventListener('input', updateTotalAmount);
        updateTotalAmount();
        validateAmountAndTogglePayButton();

        // Обновление блока конвертации
        function updateConversionBlock() {
            const amountRub = parseFloat(amountInput.value.replace(',', '.')) || 0;
            const block = document.getElementById('conversion-block');
            const result = document.getElementById('conversion-result');
            if (amountRub > 0 && rates.USD > 0 && rates.KZT > 0) {
                block.style.display = 'block';
                let text = '';
                if (selectedCurrency === 'RUB') {
                    text = `~${amountRub.toFixed(2)} ₽`;
                } else if (selectedCurrency === 'USD') {
                    text = `~${(amountRub * rates.USD).toFixed(2)} $`;
                } else if (selectedCurrency === 'KZT') {
                    text = `~${(amountRub * rates.KZT).toFixed(2)} ₸`;
                }
                result.textContent = text;
            } else {
                block.style.display = 'none';
            }
        }
        amountInput.addEventListener('input', updateConversionBlock);
        fetchRates();

        // FAQ тултип для конвертации
        const conversionFaq = document.getElementById('conversion-faq');
        const conversionTooltip = document.getElementById('conversion-tooltip');
        // Tooltip для справки о конвертации: hover для десктопа, tap/click для мобильных
        function isMobile() {
            return window.matchMedia('(max-width: 700px)').matches;
        }
        let tooltipVisible = false;
        function showConversionTooltip() {
            const conversionTooltip = document.getElementById('conversion-tooltip');
            conversionTooltip.innerHTML = 'На ваш аккаунт поступает сумма в долларах&nbsp;$.<br>Steam автоматически конвертирует её в валюту аккаунта — тенге ₸, рубли ₽ или доллары СНГ $.<br><br><b>Итоговая сумма может отличаться из-за внутренней конвертации.</b>';
            if (isMobile()) {
                conversionTooltip.style.display = 'block';
                conversionTooltip.style.left = '50%';
                conversionTooltip.style.right = 'unset';
                conversionTooltip.style.top = 'unset';
                conversionTooltip.style.bottom = '12px';
                conversionTooltip.style.transform = 'translateX(-50%)';
            } else {
                const rect = conversionFaq.getBoundingClientRect();
                conversionTooltip.style.display = 'block';
                conversionTooltip.style.left = (rect.right + 8) + 'px';
                conversionTooltip.style.top = (rect.top - 8) + 'px';
            }
            tooltipVisible = true;
        }
        function hideConversionTooltip() {
            const conversionTooltip = document.getElementById('conversion-tooltip');
            conversionTooltip.style.display = 'none';
            tooltipVisible = false;
        }
        // Для десктопа — hover
        conversionFaq.addEventListener('mouseenter', (e) => {
            if (!isMobile()) showConversionTooltip();
        });
        conversionFaq.addEventListener('mouseleave', () => {
            if (!isMobile()) hideConversionTooltip();
        });
        // Для мобильных — tap/click
        conversionFaq.addEventListener('click', (e) => {
            if (isMobile()) {
                e.stopPropagation();
                if (tooltipVisible) {
                    hideConversionTooltip();
                } else {
                    showConversionTooltip();
                }
            }
        });
        // Скрывать tooltip при клике вне его
        document.body.addEventListener('click', function(e) {
            if (tooltipVisible && isMobile()) {
                const conversionTooltip = document.getElementById('conversion-tooltip');
                if (!conversionTooltip.contains(e.target) && e.target !== conversionFaq) {
                    hideConversionTooltip();
                }
            }
        });

        // FAQ модалка для логина
        const loginFaqBtn = document.getElementById('login-faq-btn');
        const loginFaqModal = document.getElementById('login-faq-modal');
        const loginFaqClose = document.getElementById('login-faq-close');
        loginFaqBtn.addEventListener('mouseenter', () => {
            loginFaqBtn.style.background = '#444';
        });
        loginFaqBtn.addEventListener('mouseleave', () => {
            loginFaqBtn.style.background = '#23232b';
        });
        loginFaqBtn.addEventListener('click', () => {
            loginFaqModal.style.display = 'flex';
        });
        loginFaqClose.addEventListener('click', () => {
            loginFaqModal.style.display = 'none';
        });
        loginFaqModal.addEventListener('click', (e) => {
            if (e.target === loginFaqModal) loginFaqModal.style.display = 'none';
        });

        function validateAmountAndTogglePayButton() {
            const amountRub = parseFloat(amountInput.value.replace(',', '.'));
            if (amountInput.value.trim() === "") {
                payButton.disabled = true;
                amountError.style.visibility = 'hidden';
                amountError.style.display = 'none';
                amountError.textContent = '';
            } else if (amountRub >= 25) {
                payButton.disabled = false;
                amountError.style.visibility = 'hidden';
                amountError.style.display = 'none';
                amountError.textContent = '';
            } else {
                payButton.disabled = true;
                amountError.style.visibility = 'visible';
                amountError.style.display = 'block';
                amountError.textContent = 'Минимальная сумма пополнения 25 рублей';
            }
        }
        amountInput.addEventListener('input', function(e) {
            // Удаляем всё, кроме цифр
            let val = amountInput.value.replace(/[^0-9]/g, '');
            if (val !== amountInput.value) {
                amountInput.value = val;
            }
            validateAmountAndTogglePayButton();
        });
        validateAmountAndTogglePayButton();

        amountInput.addEventListener('keydown', function(e) {
            if (e.key === '.' || e.key === ',' || e.key === 'e') {
                e.preventDefault();
            }
        });

        // Отправка формы на сервер
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            errorMessage.style.display = 'none';
            successMessage.style.display = 'none';
            loading.style.display = 'block';
            payButton.disabled = true;
            
            const login = steamLoginInput.value.trim();
            const amount = parseFloat(amountInput.value.replace(',', '.'));
            
            try {
                const response = await fetch('/process_payment', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        steam_login: login, 
                        amount: amount 
                    })
                });
                
                const result = await response.json();
                loading.style.display = 'none';
                
                if (response.ok && result.success) {
                    successMessage.textContent = `Заказ успешно создан! ID заказа: ${result.order_id}, сумма пополнения: ${amount.toFixed(2)} руб.`;
                    successMessage.style.display = 'block';
                    errorMessage.style.display = 'none';
                } else {
                    errorMessage.textContent = result.error || 'Произошла ошибка при создании заказа';
                    errorMessage.style.display = 'block';
                    successMessage.style.display = 'none';
                }
            } catch (err) {
                loading.style.display = 'none';
                errorMessage.textContent = 'Ошибка соединения с сервером';
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
            }
            
            payButton.disabled = false;
        });

        // Исправляю переходы на абсолютные пути
        // Навигация "Главная"
        document.addEventListener('DOMContentLoaded', function() {
          // Переход на "Главная"
          const navMain = document.getElementById('nav-steam');
          if (navMain) {
            navMain.addEventListener('click', function(e) {
              e.preventDefault();
              window.location.href = '/steamtopup/steamtopup.html';
            });
          }
          // Навигация "Игры"
          const navAllGames = document.getElementById('nav-allgames');
          if (navAllGames) {
            navAllGames.addEventListener('click', function(e) {
              e.preventDefault();
              window.location.href = '/allgames/allgames.html';
            });
          }
        });
    </script>
</body>
</html>